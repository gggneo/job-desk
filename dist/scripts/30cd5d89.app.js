!function(){"use strict";var a=angular.module("job-desk",["LocalStorageModule","tmh.dynamicLocale","ui.router","ui.bootstrap-slider","ngResource","ngCookies","ngFlowtype","ngKeypad","pascalprecht.translate","ngCacheBuster","geolocation","alv-ch-ng.core","alv-ch-ng.security","alv-ch-ng.scroll","alv-ch-ng.forms","alv-ch-ng.selectpicker","alv-ch-ng.text-truncate","job-desk.i18n","job-desk.directive"]);a.config(["$httpProvider",function(a){a.defaults.headers.useXDomain=!0,a.defaults.withCredentials=!0,a.interceptors.push("authInterceptor"),delete a.defaults.headers.common["X-Requested-With"],a.defaults.headers.common["If-Modified-Since"]="01 Jan 1970 00:00:00 GMT"}]),a.config(["$stateProvider","$urlRouterProvider","httpRequestInterceptorCacheBusterProvider","SecurityConfigProvider",function(a,b,c,d){d.setClientId("job-desk"),d.setClientSecret("job-deskSecret"),c.setMatchlist([/.*rest.*/,/.*protected.*/],!0),b.otherwise("/"),a.state("site",{"abstract":!0,views:{"navbar@":{templateUrl:"views/navbar/navbar.html",controller:"NavbarCtrl"},"footer@":{templateUrl:"views/footer/footer.html"}}})}]),a.config(["$stateProvider",function(a){a.state("error",{parent:"site",url:"/error",data:{roles:[],hidden:!0},views:{"content@":{templateUrl:"views/content/error/error.html"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("errors"),a.refresh()}]},hidden:!0}).state("frontpage",{parent:"site",url:"/frontpage",views:{"content@":{templateUrl:"views/content/localInfo/localInfo.html"}}})}]),a.run(["$http","geolocation","$rootScope",function(a,b,c){b.getLocation().then(function(a){c.myCoords={lat:a.coords.latitude,lng:a.coords.longitude}}),a.get("/jobs/_search?pretty=true&q=*:*").success(function(a){console.log(a)})}])}(),angular.module("job-desk").constant("ENV","dev").constant("VERSION","src/main"),function(){"use strict";var a=angular.module("job-desk.i18n",["pascalprecht.translate","LocalStorageModule","tmh.dynamicLocale"]);a.config(["$translateProvider","tmhDynamicLocaleProvider",function(a,b){a.useLoader("$translatePartialLoader",{urlTemplate:"i18n/{lang}/{part}.json"}),a.useCookieStorage(),a.preferredLanguage("de"),b.localeLocationPattern("bower_components/angular-i18n/angular-locale_{{locale}}.js"),b.useCookieStorage("NG_TRANSLATE_LANG_KEY")}]),a.run(["$rootScope","$translate","LanguageService","$translatePartialLoader",function(a,b,c,d){a.changeLanguage=function(a){b.use(a)},c.getAll().then(function(b){a.languages=b}),a.$on("$stateChangeStart",function(){c.getCurrent().then(function(a){b.use(a)})}),function(){for(var a=0;a<c.getDefaultParts().length;a++){var e=c.getDefaultParts()[a];d.addPart(e)}b.refresh()}()}]),a.controller("LanguageCtrl",["$scope","LanguageService",function(a,b){a.getCurrent=b.getCurrent,a.getAll=b.getAll}]),a.provider("LanguageService",function(){function a(){var a=d.defer(),b=f.storage().get("NG_TRANSLATE_LANG_KEY");return angular.isUndefined(b)&&(b="en"),a.resolve(b),a.promise}function b(){var a=d.defer();return a.resolve(g),a.promise}function c(){return h}var d,e,f,g=["de","fr","it","en"],h=["global","languages","errors"];this.setLanguages=function(a){g=a},this.setDefaultParts=function(a){h=a},this.$get=["$q","$http","$translate",function(g,h,i){return d=g,e=h,f=i,{getAll:b,getCurrent:a,getDefaultParts:c}}]})}(),function(){"use strict";var a=angular.module("job-desk.directive",[]);a.factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=b.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="http://d3js.org/d3.v3.min.js",f.onreadystatechange=function(){"complete"===this.readyState&&d()},f.onload=d;var g=a[0].getElementsByTagName("body")[0];return g.appendChild(f),{d3:function(){return e.promise}}}]),a.directive("swissMap",["d3Service","$window","$rootScope",function(a,b,c){return{priority:10,restrict:"E",link:function(b){a.d3().then(function(a){function d(){c.$watch("myCoords",function(){if(void 0!==c.myCoords){var a="my-location",b=q([c.myCoords.lng,c.myCoords.lat]);s.append("circle").attr({cx:b[0],cy:b[1],r:3}).attr("class",a).attr("id",a),e(!1)}})}function e(a){if(void 0!==b.currentCoords){$("#current-radius").remove(),$("#current-location").remove(),$("#my-radius").remove();var c="current-location",d="current-radius",e=2;a&&(c="my-location",d="my-radius",e=3);var f=q([b.currentCoords.lng,b.currentCoords.lat]);s.append("circle").attr({cx:f[0],cy:f[1],r:e}).attr("class",c).attr("id",c),s.append("circle").attr({cx:f[0],cy:f[1],r:2*b.searchParams.km}).attr("class","radius").attr("id",d)}}function f(){$(".city-boundaries").remove(),$(".city-text").remove(),a.json("assets/topojson/cities.json",function(a){for(var b=0;b<a.length;b++){var c=q(a[b].geometry.coordinates);s.append("svg:circle").attr("cx",c[0]).attr("cy",c[1]).attr("r",3).attr("class","city-boundaries").text(a[b].properties.name),s.append("text").attr("transform","translate("+q(a[b].geometry.coordinates)+")").attr("dy","1.25em").attr("class","city-text").text(a[b].properties.name)}})}function g(){i=$("#map").parent().width(),l=i*k,l>m&&(l=m,i=l/k,j=17*i),q.translate([i/2,l/2]).scale(15*i),s.style("width",i+"px").style("height",l+"px"),s.selectAll(".canton-boundaries").attr("d",r),s.selectAll(".contour").attr("d",r),s.selectAll(".lakes").attr("d",r),$(".my-location").remove(),f(),d()}var h,i=$("#map").parent().width(),j=17*i,k=.625,l=i*k,m=$(window).height()-($("#topnav").height()+$("#filter").height()+$("#navbottom").height()),n=[500,1e3,1500,2e3,2500,3e3,3500,4e3];l>m&&(l=m,i=l/k,j=17*i);var o=a.interpolateHcl("#94BF8B","#F5F4F2"),p=a.scale.threshold().domain(n).range(a.range(n.length+1).map(function(a,b){return o(b/n.length)})),q=a.geo.albers().rotate([0,0]).center([8.3,46.8]).scale(j).translate([i/2,l/2]).precision(.1),r=a.geo.path().projection(q),s=a.select("#map").append("svg").attr("width",i).attr("height",l),t=s.append("g");a.json("assets/topojson/ch-contours.json",function(a,b){h=t.append("svg").attr("id","contours").selectAll(".contour").data(topojson.feature(b,b.objects.contours).features).enter().append("path").attr("class","contour").attr("d",r).style("fill",function(a){return p(a.id)})}),a.json("assets/topojson/ch.json",function(a,b){t.append("svg").attr("id","cantons").selectAll("path").data(topojson.feature(b,b.objects.cantons).features).enter().append("path").attr("class","canton-boundaries").attr("id",function(a){return a.properties.abbr}).attr("d",r),t.append("path").attr("id","lakes").datum(topojson.mesh(b,b.objects.lakes)).attr("class","lakes").attr("d",r)}),window.onresize=function(){g()},a.select(window).on("resize",g()),a.select("svg").on("mousedown.log",function(){var c=q.invert(a.mouse(this));b.setCurrentCoords({lng:c[0],lat:c[1]})}),b.$watch("searchParams.km",function(){$(".radius").attr("r",2*b.searchParams.km)}),b.$watch("currentCoords",function(){void 0!==b.currentCoords&&e(!1)})})}}}])}(),angular.module("job-desk").config(["$stateProvider",function(a){a.state("localInfo",{parent:"site",url:"/localInfo",sequence:0,label:"global.menu.localInfo",hidden:!0,views:{"content@":{templateUrl:"views/content/localInfo/localInfo.html",controller:"LocalInfoController"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("localInfo"),a.refresh()}]}})}]),angular.module("job-desk").controller("LocalInfoController",["$scope",function(a){}]),angular.module("job-desk").config(["$stateProvider",function(a){a.state("apprenticeships",{parent:"site",url:"/apprenticeships",label:"global.menu.apprenticeships",views:{"content@":{templateUrl:"views/content/apprenticeships/apprenticeships.html",controller:"ApprenticeshipsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("apprenticeships"),a.refresh()}]}}).state("apprenticeship-search",{parent:"site",url:"/apprenticeship-search",views:{"content@":{templateUrl:"views/content/apprenticeships/search.html",controller:"ApprenticeshipsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),a.refresh()}]}})}]),function(){"use strict";angular.module("job-desk").factory("ApprenticeshipsService",["$http","baseUrl",function(a,b){function c(a){}function d(c,d){a.post(b+"/locations/area",{coord:c,radius:e.km}).success(function(c){var f="",g=[],h=0;angular.forEach(c.areas,function(a){0===h&&(f=a.CODE+" ("+a.TEXT+")"),-1===g.indexOf(a.CODE)&&g.push(a.CODE)}),a.post(b+"/lenas/countJobs",{plz:g,swissdoc:e.swissdoc,swissdoc2:e.swissdoc2}).success(function(a){d(a.count,g,f)})})}var e={km:30,swissdoc:"",swissdoc2:"",locations:[]};return{find:c,count:d,params:e}}])}(),function(){"use strict";angular.module("job-desk").controller("ApprenticeshipsCtrl",["$scope","$rootScope","$state","ApprenticeshipsService",function(a,b,c,d){b.searchType="apprenticeships",a.searchParams=d.params,a.kmOptions={min:10,max:150,step:10,value:30},a.idle=!1,a.count=0,a.nearestZip="",a.currentCoords=void 0,a.sort=0,a.executeSearch=function(){c.go("apprenticeship-result")},a.executeSearch=function(){d.find(a.searchParams).success(function(b){a.apprenticeships=b})},a.setSwissdocGroup=function(b){a.searchParams.swissdoc=b,a.searchParams.swissdoc2="",c.go("apprenticeship-search")},a.countStellen=function(){a.idle=!0,d.count(a.currentCoords,function(b,c,d){a.count=b,a.nearestZip=d,a.searchParams.locations=c,a.idle=!1})},a.showDistanceInKM=function(){return 1===a.searchParams.areaType?a.searchParams.km+" km":""},a.setCurrentCoords=function(b){a.currentCoords=b,a.$digest()},a.$watch("currentCoords",function(){void 0!==a.currentCoords&&a.countStellen()}),a.$watch("myCoords",function(){void 0!==b.myCoords&&(a.currentCoords=b.myCoords)})}])}(),angular.module("job-desk").config(["$stateProvider",function(a){a.state("educations",{parent:"site",url:"/educations",label:"global.menu.educations",views:{"content@":{templateUrl:"views/content/educations/educations.html",controller:"EducationsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("educations"),a.refresh()}]}})}]),function(){"use strict";angular.module("job-desk").factory("EducationsService",["$http",function(a){function b(){return a.get(e)}function c(b){var c=c,d=0;for(var e in b)(b[e]||b[e]===!1)&&(c+=d>0?"&":"?",c=c+e+"="+b[e],d++);return a.get(c)}var d={search:"educations"},e="resource/educations";return{all:b,find:c,params:d}}])}(),function(){"use strict";angular.module("job-desk").controller("EducationsCtrl",["$scope","$rootScope","EducationsService",function(a,b,c){b.searchType="educations",a.searchParams=c.params,a.educations=b.educations,a.executeSearch=function(){c.find(a.searchParams).success(function(b){a.educations=b})}}])}(),angular.module("job-desk").config(["$stateProvider",function(a){a.state("jobs",{parent:"site",url:"/",label:"global.menu.jobs",views:{"content@":{templateUrl:"views/content/jobs/jobs.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),a.refresh()}]}}).state("job-search",{parent:"site",url:"/job-search",views:{"content@":{templateUrl:"views/content/jobs/search.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),a.refresh()}]}}).state("job-result",{parent:"site",url:"/job-result",views:{"content@":{templateUrl:"views/content/jobs/result.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),a.refresh()}],jobsLoader:["JobsService",function(a){a.find()}]}}).state("job-detail",{parent:"site",url:"/job-detail/:jobId",views:{"content@":{templateUrl:"views/content/jobs/detail.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),a.refresh()}],jobDetailLoader:["$stateParams","JobsService",function(a,b){b.getJob(a.jobId)}]}})}]),function(){"use strict";angular.module("job-desk").factory("JobsService",["$http","baseUrl","$rootScope",function(a,b,c){function d(){a.post(b+"/jobs/getJobs",{plz:g.locations,isco:g.isco,isco2:g.isco2,fulltime:g.fulltime,history:g.history}).success(function(a){c.jobs=a.jobs}).error(function(a){console.log(a)})}function e(c,d){a.post(b+"/locations/area",{coord:c,radius:g.km}).success(function(c){var e="",f=[],h=0;angular.forEach(c.areas,function(a){0===h&&(e=a.CODE+" ("+a.TEXT+")"),-1===f.indexOf(a.CODE)&&f.push(a.CODE)}),a.post(b+"/jobs/countJobs",{plz:f,isco:g.isco,isco2:g.isco2,fulltime:g.fulltime,history:g.history}).success(function(a){d(a.count,f,e)})})}function f(d){a.get(b+"/jobdetails/"+d).success(function(a){c.job=a}).error(function(a){console.log(a)})}var g={km:30,history:5,fulltime:!0,isco:"",isco2:"",locations:[]};return{find:d,count:e,params:g,getJob:f}}])}(),function(){"use strict";angular.module("job-desk").controller("JobsCtrl",["$scope","$rootScope","$state","$filter","JobsService","lodash",function(a,b,c,d,e,f){function g(a){c.go(a)}b.searchType="jobs",a.searchParams=e.params,a.kmOptions={min:10,max:150,step:10,value:30},a.hourOptions={min:10,max:240,step:5,value:60},a.historyOptions={min:1,max:60,step:1,value:5},a.iscoCategory=[{text:"isco.category1",code:"1"},{text:"isco.category2",code:"2"},{text:"isco.category3",code:"3"},{text:"isco.category4",code:"4"},{text:"isco.category5",code:"5"},{text:"isco.category6",code:"6"},{text:"isco.category7",code:"7"},{text:"isco.category8",code:"8"},{text:"isco.category9",code:"9"}],a.idle=!1,a.count=0,a.nearestZip="",a.currentCoords=void 0,a.sort=0,a.executeSearch=function(){c.go("job-result")},a.setIscoGroup=function(b){a.searchParams.isco=b,a.searchParams.isco2="",c.go("job-search")},a.showTimeInH=function(){var b=Math.floor(a.searchParams.time/60),c=a.searchParams.time-60*b;return 10>c&&(c+="0"),2===a.searchParams.areaType?b+":"+c+" h":""},a.showDistanceInKM=function(){return 1===a.searchParams.areaType?a.searchParams.km+" km":""},a.countStellen=function(){a.idle=!0,e.count(a.currentCoords,function(b,c,d){a.count=b,a.nearestZip=d,a.searchParams.locations=c,a.idle=!1})},a.setCurrentCoords=function(b){a.currentCoords=b,a.$digest()},a.navigateToJob=function(a){var d=f.findIndex(b.jobs,{id:b.job.id});a?(d++,d===b.jobs.length&&(d=0)):(0===d&&(d=b.jobs.length),d--),c.go("job-detail",{jobId:b.jobs[d].id})},a.$watch("currentCoords",function(){void 0!==a.currentCoords&&a.countStellen()}),a.$watch("myCoords",function(){void 0!==b.myCoords&&(a.currentCoords=b.myCoords)});var h=d("orderBy");a.sortList=[{code:{field:"ONLINE_SEIT",order:!1},text:"global.sort.neuste"},{code:{field:"UNBEFRISTET_B",order:!0},text:"global.sort.unbefristet"},{code:{field:"UNBEFRISTET_B",order:!1},text:"global.sort.befristet"},{code:{field:"PENSUM_BIS",order:!0},text:"global.sort.pensum_0"},{code:{field:"PENSUM_BIS",order:!1},text:"global.sort.pensum_100"},{code:{field:"BEZEICHNUNG",order:!1},text:"global.sort.jobtitel_az"},{code:{field:"BEZEICHNUNG",order:!0},text:"global.sort.jobtitel_za"}],a.sortResultList=function(c){a.sort=c,b.jobs=h(b.jobs,a.sortList[c].code.field,a.sortList[c].code.order)},a.ssiKeyStart=function(){c.go("startpage")},a.ssiKeyInfo=function(){c.go("frontpage")},a.ssiKeySearch=function(){g("job-search")},a.ssiKeyResults=function(){g("job-result")},a.ssiKeyNext=function(){a.navigateToJob(!0)},a.ssiKeyBack=function(){a.navigateToJob(!1)}}])}(),function(){"use strict";var a=angular.module("job-desk");a.directive("help",function(){return{priority:10,restrict:"E",replace:!0,templateUrl:"assets/templates/help.html",link:function(a,b){b.addClass("example")}}}),a.directive("categoryGroup",["$window",function(a){return{priority:10,restrict:"C",link:function(b,c){var d=a.innerHeight/5-20;c.css("height",d),b.$on("$viewContentLoaded",function(){d=a.innerHeight/5-20,c.css("height",d)}),$(a).resize(function(){d=a.innerHeight/5-20,c.css("height",d)})}}}]),a.directive("jobResults",["$window",function(a){return{priority:10,restrict:"C",link:function(b,c){var d=$("#filter").outerHeight(!0)||0,e=$("#navbottom").outerHeight(!0)||0,f=$("#topnav").outerHeight(!0)||0,g=a.innerHeight-(d+e+f);c.css("height",g),b.$on("$viewContentLoaded",function(){d=$("#filter").outerHeight(!0)||0,e=$("#navbottom").outerHeight(!0)||0,f=$("#topnav").outerHeight(!0)||0,g=a.innerHeight-(d+e+f),c.css("height",g)}),$(a).resize(function(){d=$("#filter").outerHeight(!0)||0,e=$("#navbottom").outerHeight(!0)||0,f=$("#topnav").outerHeight(!0)||0,g=a.innerHeight-(d+e+f),c.css("height",g)})}}}]),a.directive("navigation",["$window",function(a){return{priority:10,restrict:"C",link:function(b,c){var d=a.innerHeight/5/2;c.css("height",d),b.$on("$viewContentLoaded",function(){d=a.innerHeight/5/2,c.css("height",d)}),$(a).resize(function(){d=a.innerHeight/5/2,c.css("height",d)})}}}])}(),function(){"use strict";angular.module("job-desk").factory("CodesService",["$http",function(a){function b(b){return a.get(d+"?type="+b)}function c(b,c){var e=d+"?type="+c;for(var f in b)(b[f]||b[f]===!1)&&(e=e+"?"+f+"="+b[f]);return a.get(e)}var d="resource/codes";return{all:b,find:c}}])}(),function(){"use strict";window.Key=function(a,b,c){function d(){"ontouchstart"in document.documentElement?(b.bind("touchstart.ngKey",e),h.bind("touchend.ngKey",f)):(b.bind("mousedown.ngKey",e),h.bind("mouseup.ngKey",f)),a.$on("destroy",g)}function e(d){b.addClass("pressed"),d.preventDefault(),d.stopImmediatePropagation(),a.$emit(Key.PRESSED,c.ngKey)}function f(a){b.removeClass("pressed")}function g(){b.bind("touchstart.ngKey",e),bodybind("touchend.ngKey",f),b.bind("mousedown.ngKey",e),h.bind("mouseup.ngKey",f)}var h=$("body");d()},Key.PRESSED="Key.PRESSED",angular.module("ngKeypad",[]).directive("ngKey",function(){return{restrict:"A",link:function(a,b,c){new Key(a,b,c)}}})}(),function(){"use strict";window.Keypad=function(a,b,c,d){function e(){a.$on(Key.PRESSED,g),d.$on(Keypad.TOGGLE_LOCKING,h),d.$on(Keypad.TOGGLE_OPENING,i),d.$on(Keypad.OPEN,i),d.$on(Keypad.CLOSE,i),b.addClass("closed"),f()}function f(){a.close=function(){l()}}function g(b,c){o||(-1===c.indexOf("[")&&-1===c.indexOf("]")?a.$emit(Keypad.KEY_PRESSED,c,q):a.$emit(Keypad.MODIFIER_KEY_PRESSED,c.substring(1,c.length-1),q))}function h(a,c){q!==c&&c||(o=!o,o?b.attr("disabled","disabled"):b.removeAttr("disabled"))}function i(a,b,c){if(q===b||!b){switch(a.name){case Keypad.CLOSE:p=!1;break;case Keypad.OPEN:p=!0;break;default:p=!p}p?(k(),j(c)):l()}}function j(a){a&&a.position&&(b.css("top",a.position.y),b.css("left",a.position.x))}function k(){b.removeClass("closed"),a.$emit(Keypad.OPENED,q),m(),j()}function l(){p=!1,a.$emit(Keypad.CLOSED,q),r.off("click.keypad"),b.addClass("closed")}function m(){c.autoClose&&setTimeout(function(){r.on("click.keypad",function(){p=!p,l(),a.$$phase||a.$apply()}),b.on("click.keypad",n)},1)}function n(a){a.stopPropagation()}var o=!1,p=!1,q=c.ngKeypad,r=$("body");e()},Keypad.KEY_PRESSED="Keypad.KEY_PRESSED",Keypad.MODIFIER_KEY_PRESSED="Keypad.MODIFIER_KEY_PRESSED",Keypad.TOGGLE_LOCKING="Keypad.TOGGLE_LOCKING",Keypad.TOGGLE_OPENING="Keypad.TOGGLE_OPENING",Keypad.OPENED="Keypad.OPENED",Keypad.CLOSED="Keypad.CLOSED",Keypad.OPEN="Keypad.OPEN",Keypad.CLOSE="Keypad.CLOSE",angular.module("ngKeypad").directive("ngKeypad",["$rootScope",function(a){return{restrict:"A",link:function(b,c,d){new Keypad(b,c,d,a)}}}])}(),function(){"use strict";window.KeypadInput=function(a,b,c,d){function e(){if(b.on("click.ngKeypadInput",f),b.on("focus.ngKeypadInput",f),b.on("blur.ngKeypadInput",i),!c.ngModel)throw new Error("KeypadInput requires the use of ng-model on this element",b);a.$on("destroy",m)}function f(d){d.stopPropagation(),n.active||(g(),n.active=!0,n.keyListener=a.$on(Keypad.KEY_PRESSED,j),n.closeListener=a.$on(Keypad.CLOSED,h),n.modifierKeyListener=a.$on(Keypad.MODIFIER_KEY_PRESSED,k),b.addClass("focus"),b.focus(),a.$emit(Keypad.OPEN,c.ngKeypadInput),KeypadInput.selectedInput=n)}function g(){KeypadInput.selectedInput&&(KeypadInput.selectedInput.active=!1,KeypadInput.selectedInput.keyListener(),KeypadInput.selectedInput.element.removeClass("focus"),KeypadInput.selectedInput=null)}function h(a,b){n.padId===b&&n.active&&g()}function i(a){g()}function j(b,c,e){if(n.padId===e&&n.active){var f=d.$viewValue;f||(f=""),l(f,c)||(f+=c),d.$setViewValue(f),a.$apply()}}function k(b,c,e){n.padId===e&&n.active&&"CLEAR"===c&&(d.$setViewValue(""),a.$apply())}function l(a,b){var d=!1,e=new RegExp(c.ngKeypadRestrict,"gi");return c.ngKeypadRestrict&&(b.match(e)?String(a+b).match(e,"gi")||(d=!0):d=!0),d}function m(){b.off("click.ngKeypadInput"),b.on("focus.ngKeypadInput",this.handleElementSelected)}var n=this;this.modifierKeyListener=null,this.keyListener=null,this.element=b,this.active=!1,this.model=null,this.padId=c.ngKeypadInput,e()},KeypadInput.selectedInput=null,angular.module("ngKeypad").directive("ngKeypadInput",function(){return{restrict:"A",require:"^ngModel",link:function(a,b,c,d){new KeypadInput(a,b,c,d)}}})}();