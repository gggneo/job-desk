!function(){"use strict";var a=angular.module("job-desk",["LocalStorageModule","tmh.dynamicLocale","ui.router","ui.router.stateHelper","ngResource","ngSanitize","ngCookies","ngMaterial","ngLodash","pascalprecht.translate","ngCacheBuster","geolocation","cfp.hotkeys","alv-ch-ng.security","alv-ch-ng.text-truncate","job-desk.i18n","job-desk.directive"]);a.config(["$httpProvider",function(a){a.defaults.headers.useXDomain=!0,a.defaults.withCredentials=!0,a.interceptors.push("authInterceptor"),delete a.defaults.headers.common["X-Requested-With"],a.defaults.headers.common["If-Modified-Since"]="01 Jan 1970 00:00:00 GMT"}]),a.config(["$stateProvider","$urlRouterProvider","httpRequestInterceptorCacheBusterProvider","SecurityConfigProvider","$mdThemingProvider",function(a,b,c,d,e){d.setClientId("job-desk"),d.setClientSecret("job-deskSecret"),c.setMatchlist([/.*rest.*/,/.*protected.*/],!0),b.otherwise("/"),a.state("site",{"abstract":!0}),e.theme("jobs").primaryPalette("blue").accentPalette("blue-grey"),e.theme("educations").primaryPalette("indigo").accentPalette("blue-grey"),e.theme("apprenticeships").primaryPalette("teal").accentPalette("blue-grey"),e.setDefaultTheme("jobs")}]),a.config(["$stateProvider","hotkeysProvider",function(a,b){a.state("error",{parent:"site",url:"/error",data:{roles:[],hidden:!0},views:{"content@":{templateUrl:"views/content/error/error.html"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("errors"),a.refresh()}]},hidden:!0}).state("frontpage",{parent:"site",url:"/frontpage",views:{"content@":{templateUrl:"views/content/localInfo/localInfo.html"}}}),b.includeCheatSheet=!1}]),a.run(["$http","geolocation","$rootScope","$state","$cookies",function(a,b,c,d,e){c.mobile=$.browser.mobile,c.appConfig={educations:!0,apprenticeships:!0},c.current=function(){return"/"===d.$current.url.source||"/jobs"===d.$current.url.source||"/apprenticeships"===d.$current.url.source||"/educations"===d.$current.url.source?"info_outline":"keyboard_arrow_left"};var f;c.openMenu=function(a,b){f=b,a(b)},c.closeMenu=function(a){f=null,d.go(a)};var g=e.getObject("config");angular.isObject(g)?(c.appConfig=g,c.myCoords=g.coords):b.getLocation().then(function(a){void 0===c.myCoords&&(c.myCoords={lat:a.coords.latitude,lon:a.coords.longitude})}),c.back=function(){"/"===d.$current.url.source||"/jobs"===d.$current.url.source||"/apprenticeships"===d.$current.url.source||"/educations"===d.$current.url.source?d.go("localInfo"):"/job-search"===d.$current.url.source||"/config"===d.$current.url.source?d.go("jobs"):"/job-results"===d.$current.url.source?d.go("job-search"):"/apprenticeship-search"===d.$current.url.source?d.go("apprenticeships"):"/apprenticeship-results"===d.$current.url.source?d.go("apprenticeship-search"):"/education-search"===d.$current.url.source?d.go("educations"):"/education-results"===d.$current.url.source?d.go("education-search"):"/localInfo"===d.$current.url.source&&d.go(c.searchType)},c.ssiKeyStart=function(){d.go("jobs")},c.ssiKeyInfo=function(){d.go("localInfo")}}])}(),angular.module("job-desk").constant("ENV","prod").constant("VERSION","src/main").constant("baseUrl","http://jobdesk.job-room.ch/jobdesk").constant("arrleeUrl","http://jobdesk.job-room.ch/arrlee").constant("supportedLanguages",["de","fr","it","en"]),function(){"use strict";var a=angular.module("job-desk.i18n",["pascalprecht.translate","LocalStorageModule","tmh.dynamicLocale"]);a.config(["$translateProvider","tmhDynamicLocaleProvider","supportedLanguages",function(a,b,c){a.registerAvailableLanguageKeys(c,{en_US:"en",en_UK:"en",de_DE:"de",de_CH:"de",fr_CH:"fr",it_CH:"it",fr_FR:"fr",it_IT:"it"}),a.useLoader("$translatePartialLoader",{urlTemplate:"i18n/{lang}/{part}.json"}),a.useCookieStorage(),a.determinePreferredLanguage(),b.localeLocationPattern("bower_components/angular-i18n/angular-locale_{{locale}}.js"),b.useCookieStorage("NG_TRANSLATE_LANG_KEY")}]),a.run(["$rootScope","$translate","LanguageService","$translatePartialLoader",function(a,b,c,d){a.currentLanguage=!1,a.changeLanguage=function(a){b.use(a)},c.getAll().then(function(b){a.languages=b}),a.$on("$stateChangeStart",function(){c.getCurrent().then(function(c){a.currentLanguage=c,b.use(c)})}),function(){for(var a=0;a<c.getDefaultParts().length;a++){var e=c.getDefaultParts()[a];d.addPart(e)}b.refresh()}()}]),a.controller("LanguageCtrl",["$scope","LanguageService",function(a,b){a.getCurrent=b.getCurrent,a.getAll=b.getAll}]),a.provider("LanguageService",function(){function a(){var a=d.defer(),b=f.storage().get("NG_TRANSLATE_LANG_KEY");return angular.isUndefined(b)&&(b="en"),a.resolve(b),a.promise}function b(){var a=d.defer();return a.resolve(g),a.promise}function c(){return h}var d,e,f,g=["de","fr","it","en"],h=["global","languages","errors"];this.setLanguages=function(a){g=a},this.setDefaultParts=function(a){h=a},this.$get=["$q","$http","$translate",function(g,h,i){return d=g,e=h,f=i,{getAll:b,getCurrent:a,getDefaultParts:c}}]})}(),angular.module("job-desk.i18n").constant("supportedLanguages",["de","fr","it","en"]),function(){"use strict";var a=angular.module("job-desk.directive",[]);a.factory("d3Service",["$document","$q","$rootScope",function(a,b,c){function d(){c.$apply(function(){e.resolve(window.d3)})}var e=b.defer(),f=a[0].createElement("script");f.type="text/javascript",f.async=!0,f.src="http://d3js.org/d3.v3.min.js",f.onreadystatechange=function(){"complete"===this.readyState&&d()},f.onload=d;var g=a[0].getElementsByTagName("body")[0];return g.appendChild(f),{d3:function(){return e.promise}}}]),a.directive("swissMap",["d3Service","$window","$rootScope","MunicipalitiesService",function(a,b,c,d){return{priority:10,restrict:"E",link:function(b){a.d3().then(function(a){function e(){var a=[7.461928,46.953525],b=y(a),c=[8.541336,47.372047],d=y(c),e=Math.sqrt((d[0]-b[0])*(d[0]-b[0])+(d[1]-b[1])*(d[1]-b[1])),f=94.936;return f/e}function f(){c.$watchCollection("myCoords",function(){if(void 0!==c.myCoords){var a="my-location",b=y([c.myCoords.lon,c.myCoords.lat]);B.append("circle").attr({cx:b[0],cy:b[1],r:3}).attr("class",a).attr("id",a),h()}})}function g(a){$(".current-location").remove(),B.append("circle").attr({cx:a[0],cy:a[1],r:2}).attr("class","current-location"),B.append("svg:image").attr("class","current-location").attr("width",20).attr("height",20).attr("xlink:href","/assets/images/map-marker-icon.png").attr("transform","translate("+a+")").attr("x",-10).attr("y",-20)}function h(){if(void 0!==b.searchParams.currentCoords){$("#heatmap").remove(),$("#current-radius").remove(),$("#my-radius").remove(),$("#municipalities").remove();var a=y([b.searchParams.currentCoords.lon,b.searchParams.currentCoords.lat]);"distance"===b.searchParams.distanceType&&B.append("circle").attr({cx:a[0],cy:a[1],r:b.searchParams.distance/z}).attr("class","radius").attr("id","current-radius"),c.appConfig.showMunicipalities&&"distance"===b.searchParams.distanceType&&j(),g(a)}}function i(){$(".city-boundaries").remove(),$(".city-text").remove(),a.json("assets/topojson/cities.json",function(a){var b=C.append("svg").attr("id","cities");m(a,b,"city")})}function j(){$("#municipalities").remove();var a=C.append("svg").attr("id","municipalities");"distance"===b.searchParams.distanceType?k(a):l(a)}function k(a){d.getMunicipalities(b.searchParams.currentCoords,b.searchParams.distance).success(function(b){var c={type:"GeometryCollection",geometries:[]};angular.forEach(b.hits.hits,function(a){var b={type:"Point",coordinates:[a._source.locations.geoLocation[0].coords.lon,a._source.locations.geoLocation[0].coords.lat],properties:{name:a._source.name}};c.geometries.push(b)}),m(c,a,"municipality")}).error(function(a){return console.log(a),!1})}function l(a){d.getMunicipalitiesFromZips(b.searchParams.zips).success(function(b){var c={type:"GeometryCollection",geometries:[]};angular.forEach(b.hits.hits,function(a){var b={type:"Point",coordinates:[a._source.locations.geoLocation[0].coords.lon,a._source.locations.geoLocation[0].coords.lat],properties:{name:a._source.name}};c.geometries.push(b)}),m(c,a,"municipality")}).error(function(a){return console.log(a),!1})}function m(a,b,c){b.selectAll("g").data(a.geometries).enter().append("svg:circle").attr("transform",function(a){return"translate("+y(a.coordinates)+")"}).attr("r",3).attr("class",c+"-boundaries"),b.selectAll("g").data(a.geometries).enter().append("text").attr("transform",function(a){return"translate("+y(a.coordinates)+")"}).attr("dy","1.25em").attr("class",c+"-text").text(function(a){return a.properties.name})}function n(){q=$("#map").parent().width(),t=q*s,t>u&&(t=u,q=t/s,r=17*q),y.translate([q/2,t/2]).scale(15*q),z=e(),B.style("width",q+"px").style("height",t+"px"),B.selectAll(".contour").attr("d",A),B.selectAll(".canton-boundaries").attr("d",A),B.selectAll(".lakes").attr("d",A),B.selectAll(".heatmap").attr("d",A),B.selectAll(".city-boundaries").attr("d",A),B.selectAll(".city-text").attr("d",A),$(".my-location").remove(),f()}function o(a,b){$("#heatmap").remove(),$(".radius").hide(),C.append("svg").attr("id","heatmap").selectAll("g").data(a.geometries).enter().append("path").attr("class",function(a){return a.properties.id===b-1?"heatmap heatmap-outline":"heatmap area"+a.properties.id}).attr("d",A)}var p,q=$("#map").parent().width(),r=17*q,s=.625,t=q*s,u=$(window).height()-($("#topnav").outerHeight()+$("#filter").outerHeight()),v=[500,1e3,1500,2e3,2500,3e3,3500,4e3];t>u&&(t=u,q=t/s,r=17*q);var w=a.interpolateHcl("#94BF8B","#F5F4F2"),x=a.scale.threshold().domain(v).range(a.range(v.length+1).map(function(a,b){return w(b/v.length)})),y=a.geo.albers().rotate([0,0]).center([8.3,46.8]).scale(r).translate([q/2,t/2]).precision(.1),z=e(),A=a.geo.path().projection(y),B=a.select("#map").append("svg").attr("width",q).attr("height",t),C=B.append("g");a.json("assets/topojson/ch-contours.json",function(a,b){p=C.append("svg").attr("id","contours").selectAll(".contour").data(topojson.feature(b,b.objects.contours).features).enter().append("path").attr("class","contour").attr("d",A).style("fill",function(a){return x(a.id)})}),a.json("assets/topojson/ch.json",function(a,b){C.append("svg").attr("id","cantons").selectAll("path").data(topojson.feature(b,b.objects.cantons).features).enter().append("path").attr("class","canton-boundaries").attr("id",function(a){return a.properties.abbr}).attr("d",A),C.append("path").attr("id","lakes").datum(topojson.mesh(b,b.objects.lakes)).attr("class","lakes").attr("d",A),i(),c.appConfig.showMunicipalities&&j()}),window.onresize=function(){n()},a.select(window).on("resize",n()),a.select("svg").on("mousedown.log",function(){var c=y.invert(a.mouse(this));b.setCurrentCoords({lon:c[0],lat:c[1]})}),b.$watchCollection("searchParams.distance",function(){$("#heatmap").remove(),$(".radius").show(),$(".radius").attr("r",b.searchParams.distance/z),c.appConfig.showMunicipalities&&j()}),b.$watchCollection("heatmap",function(){if(void 0!==b.heatmap){var a=[],c=[[],[]],d="MultiPolygon";angular.forEach(b.heatmap.areas,function(b,e){var f=b.polygons.sort(function(a,b){return b[0]-a[0]});c=[[],[]],angular.forEach(f,function(a){var b,f=[],g=[];for(b=1;b<a.length;b+=2)1===a[0]?f.push([a[b],a[b+1]]):g.push([a[b],a[b+1]]);"Polygon"===d?(f.reverse(),f.push(f[0]),c.push(f)):1===a[0]?f.length>0&&(0===e&&f.reverse(),f.push(f[0]),c[0].push(f)):g.length>0&&(g.push(g[0]),6===e&&c[1].push(g))});var g={type:d,properties:{id:e},coordinates:c};a.push(g)});var e={type:"GeometryCollection",bbox:[b.heatmap.bbox.xmin,b.heatmap.bbox.ymin,b.heatmap.bbox.xmax,b.heatmap.bbox.ymax],geometries:a};o(e,b.heatmap.areas.length)}}),b.$watchCollection("searchParams.currentCoords",function(){h()}),b.$watchCollection("searchParams.distanceType",function(a,c){a!==c&&"distance"===b.searchParams.distanceType&&h()}),b.$watchCollection("searchParams.zips",function(){c.appConfig.showMunicipalities&&j()})})}}}]),a.directive("keyboard",function(){return{priority:100,require:"?ngModel",restrict:"C",link:function(a,b,c,d){var e=b.offset();d&&(b.click(function(){b.getkeyboard().reveal()}),$(b).keyboard({layout:"custom",customLayout:{"default":["{clear} {b}","7 8 9","4 5 6","1 2 3","0 {a} {c}"]},accepted:function(b,c,d){var e=d.value;e.length<4&&(e=a.searchParams.currentZip),a.setCurrentZip(e)},canceled:function(){a.setCurrentZip(a.searchParams.currentZip)},beforeVisible:function(){$("#location_keyboard").css("top",e.top+b.outerHeight(!0)),$("#location_keyboard").css("left",e.left),d.$setViewValue(null),d.$render()},maxLength:4,restrictInput:!0,preventPaste:!0,autoAccept:!1,usePreview:!1,stayOpen:!0}))}}}),a.directive("languageSwitcher",["$translate","supportedLanguages",function(a,b){return{restrict:"E",templateUrl:"template/core/language-switcher.html",replace:!0,link:function(c,d,e){if(c.styleClass=d.attr("class"),c.style=d.attr("style"),c.allLanguages=[],e.languages)for(var f=e.languages.split(","),g=0;g<f.length;g++)c.allLanguages[g]=f[g].trim();else c.allLanguages=b;c.getTranslationLanguage=function(){return a.use()},c.setTranslationLanguage=function(b){a.use(b)}}}}]),a.directive("infiniteScroll",["$window","$document",function(a,b){return{priority:100,restrict:"A",link:function(a,c,d){var e=b.height()-c.offset().top,f=0,g=d.infinteScrollItem||"detail";c.css("height",e),c.scroll(function(){0===f&&(f=Math.ceil($(g+":nth-last-child(5)").offset().top-b.outerHeight(!0))),f<c.scrollTop()&&!a.idle&&(a.loadMoreResults(),f=Math.ceil($(g+":nth-last-child(5)").offset().top-b.outerHeight(!0)))})}}}])}(),angular.module("job-desk").config(["$stateProvider",function(a){a.state("localInfo",{parent:"site",url:"/localInfo",sequence:0,label:"global.menu.localInfo",hidden:!0,views:{"content@":{templateUrl:"views/content/localInfo/localInfo.html",controller:"LocalInfoController"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("localInfo"),a.refresh()}]}})}]),angular.module("job-desk").controller("LocalInfoController",["$scope",function(a){a.test="test"}]),angular.module("job-desk").config(["$stateProvider",function(a){a.state("apprenticeships",{parent:"site",url:"/apprenticeships",label:"global.menu.apprenticeships",views:{"content@":{templateUrl:"views/content/apprenticeships/apprenticeships.html",controller:"ApprenticeshipsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("apprenticeships"),b.addPart("swissdoc"),a.refresh()}]}}).state("apprenticeship-search",{parent:"site",url:"/apprenticeship-search",views:{"content@":{templateUrl:"views/content/apprenticeships/search.html",controller:"ApprenticeshipsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("apprenticeships"),b.addPart("swissdoc"),a.refresh()}]}}).state("apprenticeship-results",{parent:"site",url:"/apprenticeship-results",views:{"content@":{templateUrl:"views/content/apprenticeships/result.html",controller:"ApprenticeshipsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("apprenticeships"),b.addPart("swissdoc"),a.refresh()}]}})}]),function(){"use strict";angular.module("job-desk").factory("ApprenticeshipsService",["$http","baseUrl",function(a,b){function c(){var c={from:e.from,size:e.size,query:{filtered:{query:{match_all:{}},filter:{and:[]}}},sort:[]};""!==e.swissdocMajorGroup&&(c.query.filtered.query={prefix:{swissdoc:"0."+e.swissdocMajorGroup}}),""!==e.swissdocGroupLevel2&&0!==e.swissdocGroupLevel2&&"0"!==e.swissdocGroupLevel2&&(c.query.filtered.query={prefix:{swissdoc:"0."+e.swissdocGroupLevel2}}),"distance"===e.distanceType?c.query.filtered.filter.and.push({geo_distance:{distance:e.distance+"km",geoLocation:e.currentCoords}}):c.query.filtered.filter.and.push({terms:{"company.address.zip":e.zips}});var d={};return d[e.sort.field]={order:e.sort.order},c.sort.push(d),a.post(b+"/apprenticeships/_search",c)}function d(){return{distanceType:"distance",distance:30,travelTime:30,swissdocMajorGroup:"",swissdocGroupLevel2:"",zips:void 0,currentZip:"",currentCoords:void 0}}var e={from:0,size:20,distanceType:"distance",distance:30,travelTime:30,swissdocMajorGroup:"",swissdocGroupLevel2:"",zips:void 0,currentZip:"",currentCoords:void 0,sort:{field:"company.address.zip",order:"asc"}};return{find:c,params:e,resetSearchParams:d}}])}(),function(){"use strict";angular.module("job-desk").controller("ApprenticeshipsCtrl",["$scope","$rootScope","$state","$filter","$translate","ApprenticeshipsService","LocationsService","ArrleeService","$mdDialog","lodash",function(a,b,c,d,e,f,g,h,i,j){function k(){h.getHeatmap(a.searchParams.currentZip,a.searchParams.travelTime).success(function(b){a.heatmap=b.heatmap,h.getZips(a.searchParams.travelTime).success(function(b){a.searchParams.zips=j.pluck(b.POI,"name"),l(!1)}).error(function(a){console.log(a)})}).error(function(a){console.log(a)})}function l(c){f.find().success(function(d){c&&angular.isArray(b.apprenticeships)?b.apprenticeships=b.apprenticeships.concat(d.hits.hits):b.apprenticeships=d.hits.hits,a.count=d.hits.total,a.idle=!1}).error(function(a){console.log(a)})}function m(b){g.getLocation(b).success(function(c){c.hits.total>0?(a.searchParams.currentCoords=b,a.nearestZip=c.hits.hits[0]._source.zip+" ("+c.hits.hits[0]._source.name+")",a.searchParams.currentZip=parseInt(c.hits.hits[0]._source.zip,10),a.currentZip=a.searchParams.currentZip,a.countJobs()):a.locationError("errors.msg.noValidCoords")}).error(function(a){console.log(a)})}b.searchType="apprenticeships",a.searchParams=f.params,a.distanceOptions={min:5,max:50,step:5,value:10},a.travelTimeOptions={min:10,max:60,step:5,value:30},a.count=0,a.nearestZip="",a.currentZip=a.searchParams.currentZip,a.sort=0,a.swissdocMajorGroup=[{text:"swissdoc.0-100-0-0",code:"1",img:"jobs/isco6.png"},{text:"swissdoc.0-200-0-0",code:"2",img:"jobs/isco6.png"},{text:"swissdoc.0-300-0-0",code:"3",img:"jobs/isco6.png"},{text:"swissdoc.0-400-0-0",code:"4",img:"jobs/isco6.png"},{text:"swissdoc.0-500-0-0",code:"5",img:"jobs/isco6.png"},{text:"swissdoc.0-600-0-0",code:"6",img:"jobs/isco6.png"},{text:"swissdoc.0-700-0-0",code:"7",img:"jobs/isco6.png"},{text:"swissdoc.0-800-0-0",code:"8",img:"jobs/isco6.png"}],a.swissdocGroupLevel2=[],a.swissdocGroupLevel2[1]=[{code:"11",text:"swissdoc.0-110-0-0"},{code:"12",text:"swissdoc.0-120-0-0"},{code:"13",text:"swissdoc.0-130-0-0"},{code:"14",text:"swissdoc.0-140-0-0"},{code:"15",text:"swissdoc.0-150-0-0"},{code:"16",text:"swissdoc.0-160-0-0"},{code:"17",text:"swissdoc.0-170-0-0"}],a.swissdocGroupLevel2[2]=[{code:"21",text:"swissdoc.0-210-0-0"},{code:"22",text:"swissdoc.0-220-0-0"},{code:"23",text:"swissdoc.0-230-0-0"}],a.swissdocGroupLevel2[3]=[{code:"31",text:"swissdoc.0-310-0-0"},{code:"32",text:"swissdoc.0-320-0-0"},{code:"33",text:"swissdoc.0-330-0-0"},{code:"34",text:"swissdoc.0-340-0-0"},{code:"35",text:"swissdoc.0-350-0-0"}],a.swissdocGroupLevel2[4]=[{code:"41",text:"swissdoc.0-410-0-0"},{code:"42",text:"swissdoc.0-420-0-0"},{code:"43",text:"swissdoc.0-430-0-0"},{code:"44",text:"swissdoc.0-440-0-0"},{code:"45",text:"swissdoc.0-450-0-0"}],a.swissdocGroupLevel2[5]=[{code:"51",text:"swissdoc.0-510-0-0"},{code:"52",text:"swissdoc.0-520-0-0"},{code:"53",text:"swissdoc.0-530-0-0"},{code:"54",text:"swissdoc.0-540-0-0"},{code:"55",text:"swissdoc.0-550-0-0"},{code:"56",text:"swissdoc.0-560-0-0"},{code:"57",text:"swissdoc.0-570-0-0"},{code:"58",text:"swissdoc.0-580-0-0"},{code:"59",text:"swissdoc.0-590-0-0"}],a.swissdocGroupLevel2[6]=[{code:"61",text:"swissdoc.0-610-0-0"},{code:"62",text:"swissdoc.0-620-0-0"},{code:"63",text:"swissdoc.0-630-0-0"},{code:"64",text:"swissdoc.0-640-0-0"}],a.swissdocGroupLevel2[7]=[{code:"71",text:"swissdoc.0-710-0-0"},{code:"72",text:"swissdoc.0-720-0-0"},{code:"73",text:"swissdoc.0-730-0-0"}],a.swissdocGroupLevel2[8]=[{code:"81",text:"swissdoc.0-810-0-0"},{code:"82",text:"swissdoc.0-820-0-0"},{code:"83",text:"swissdoc.0-830-0-0"}],a.setSwissdocGroup=function(b){a.searchParams.swissdoc=b,a.searchParams.swissdoc2="",c.go("apprenticeship-search")},a.countJobs=function(){a.idle=!0,"travelTime"===a.searchParams.distanceType?k():l(!1)},a.loadMoreResults=function(){if(a.searchParams.from<a.count){a.idle=!0;var b=a.searchParams.from;b+=a.searchParams.size,b>a.count&&(b=a.count),a.searchParams.from=b,l(!0)}},a.showTimeInH=function(a){var b=Math.floor(a/60),c=a-60*b;return 10>c&&(c="0"+c),b+":"+c},a.setMyLocation=function(){m(b.myCoords)},a.setCurrentCoords=function(a){m(a)},a.$watchCollection("myCoords",function(){void 0!==b.myCoords&&void 0===a.searchParams.currentCoords&&(a.searchParams.currentCoords=b.myCoords)}),a.$watchCollection("searchParams.distanceType",function(b,c){b!==c&&a.countJobs()}),a.setCurrentZip=function(b){g.getLocationFromZip(b).success(function(b){b.hits.total>0?m(b.hits.hits[0]._source.geoLocation):(a.setCurrentZip(a.searchParams.currentZip),a.locationError("errors.msg.noValidZip"))}).error(function(a){console.log(a)})},a.locationError=function(a){i.show(i.alert().parent(angular.element(document.body)).content(e.instant(a)).ariaLabel("Alert Dialog Demo").ok("OK"))},a.sort=0,a.sortList=[{sort:{field:"company.address.zip",order:"asc"},text:"global.sort.location_1000"},{sort:{field:"company.address.zip",order:"desc"},text:"global.sort.location_9999"},{sort:{field:"titleM."+e.use(),order:"asc"},text:"global.sort.apprenticeshipstitle_az"},{sort:{field:"titleM."+e.use(),order:"desc"},text:"global.sort.apprenticeshipstitle_za"}],a.sortResultList=function(){a.searchParams.sort=a.sortList[a.sort].sort,a.countJobs()},a.resetSearchParams=function(){return f.resetSearchParams()},void 0!==a.searchParams.currentCoords?m(a.searchParams.currentCoords):a.setMyLocation()}])}(),function(){"use strict";var a=angular.module("job-desk");a.directive("apprenticeshipDetail",["$translate","$mdDialog","$timeout",function(a,b,c){return{priority:10,restrict:"A",scope:{apprenticeshipDetail:"="},templateUrl:"template/apprenticeship-detail.html",link:function(d){d.getMultiLanguageText=function(b){return b[a.use()]},d.showPrintDialog=function(){b.show({parent:angular.element(document.body),templateUrl:"views/template/apprenticeship-print.html",locals:{apprenticeshipDetail:d.apprenticeshipDetail,getMultiLanguageText:d.getMultiLanguageText},escapeToClose:!1,onComplete:function(){window.print(),c(function(){b.hide()},3e3)},controller:["$scope","apprenticeshipDetail","getMultiLanguageText",function(a,c,d){a.apprenticeshipDetail=c,a.getMultiLanguageText=d,a.cancel=function(){b.cancel()},a.formatText=function(a){return a=a.replace(/(<|&lt;)br\s*\/*(>|&gt;)/g," ")}}]})}}}}])}(),angular.module("job-desk").config(["$stateProvider",function(a){a.state("educations",{parent:"site",url:"/educations",label:"global.menu.educations",views:{"content@":{templateUrl:"views/content/educations/educations.html",controller:"EducationsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("educations"),b.addPart("swissdoc"),a.refresh()}]}}).state("education-search",{parent:"site",url:"/education-search",views:{"content@":{templateUrl:"views/content/educations/search.html",controller:"EducationsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("educations"),b.addPart("swissdoc"),a.refresh()}]}}).state("education-results",{parent:"site",url:"/education-results",views:{"content@":{templateUrl:"views/content/educations/result.html",controller:"EducationsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("educations"),b.addPart("swissdoc"),a.refresh()}]}})}]),function(){"use strict";angular.module("job-desk").factory("EducationsService",["$http","baseUrl",function(a,b){function c(){var c={from:e.from,size:e.size,query:{filtered:{query:{match_all:{}},filter:{bool:{must:[],must_not:[],should:[]}}}},sort:[]};""!==e.swissdocMajorGroup&&(c.query.filtered.query={prefix:{swissdoc:"9."+e.swissdocMajorGroup}}),""!==e.swissdocGroupLevel2&&0!==e.swissdocGroupLevel2&&"0"!==e.swissdocGroupLevel2&&(c.query.filtered.query={prefix:{swissdoc:"9."+e.swissdocGroupLevel2}}),"distance"===e.distanceType?c.query.filtered.filter.bool.must.push({geo_distance:{distance:e.distance+"km","location.coords":e.currentCoords}}):c.query.filtered.filter.bool.must.push({terms:{"location.zip":e.zips}}),""!==e.language&&("other"!==e.language?(c.query.filtered.filter.bool.should.push({term:{languages:e.language}}),"ger"===e.language?c.query.filtered.filter.bool.should.push({term:{languages:"de"}}):c.query.filtered.filter.bool.should.push({term:{languages:e.language.substr(0,2)}})):c.query.filtered.filter.bool.must.push({not:{terms:{languages:["ger","de","fre","fr","ita","it","eng","en"]}}}));var d={};return d[e.sort.field]={order:e.sort.order},c.sort.push(d),a.post(b+"/educations/_search",c)}function d(){return{distance:10,swissdocMajorGroup:"",swissdocGroupLevel2:"",language:"",zips:void 0,currentZip:"",currentCoords:void 0}}var e={from:0,size:20,distanceType:"distance",distance:30,travelTime:30,swissdocMajorGroup:"",swissdocGroupLevel2:"",language:"",zips:void 0,currentZip:"",currentCoords:void 0,sort:{field:"title",order:"desc"}};return{find:c,params:e,resetSearchParams:d}}])}(),function(){"use strict";angular.module("job-desk").controller("EducationsCtrl",["$scope","$rootScope","$state","$filter","$translate","EducationsService","LocationsService","ArrleeService","$mdDialog","lodash",function(a,b,c,d,e,f,g,h,i,j){function k(){h.getHeatmap(a.searchParams.currentZip,a.searchParams.travelTime).success(function(b){a.heatmap=b.heatmap,h.getZips(a.searchParams.travelTime).success(function(b){a.searchParams.zips=j.pluck(b.POI,"name"),l(!1)}).error(function(a){console.log(a)})}).error(function(a){console.log(a)})}function l(c){f.find().success(function(d){c&&angular.isArray(b.educations)?b.educations=b.educations.concat(d.hits.hits):b.educations=d.hits.hits,a.count=d.hits.total,a.idle=!1}).error(function(a){console.log(a)})}function m(b){g.getLocation(b).success(function(c){c.hits.total>0?(a.searchParams.currentCoords=b,a.nearestZip=c.hits.hits[0]._source.zip+" ("+c.hits.hits[0]._source.name+")",a.searchParams.currentZip=parseInt(c.hits.hits[0]._source.zip,10),a.currentZip=a.searchParams.currentZip,a.countJobs()):a.locationError("errors.msg.noValidCoords")}).error(function(a){console.log(a)})}b.searchType="educations",a.searchParams=f.params,a.distanceOptions={min:10,max:150,step:10,value:30},a.travelTimeOptions={min:10,max:60,step:5,value:30},a.count=0,a.nearestZip="",a.currentZip=a.searchParams.currentZip,a.sort=0,a.courseLanguages=[{text:"educations.result.languages.ger",code:"ger"},{text:"educations.result.languages.fre",code:"fre"},{text:"educations.result.languages.ita",code:"ita"},{text:"educations.result.languages.eng",code:"eng"},{text:"educations.result.languages.other",code:"other"}],a.swissdocMajorGroup=[{text:"swissdoc.0-100-0-0",code:"1",img:"jobs/isco6.png"},{text:"swissdoc.0-200-0-0",code:"2",img:"jobs/isco6.png"},{text:"swissdoc.0-300-0-0",code:"3",img:"jobs/isco6.png"},{text:"swissdoc.0-400-0-0",code:"4",img:"jobs/isco6.png"},{text:"swissdoc.0-500-0-0",code:"5",img:"jobs/isco6.png"},{text:"swissdoc.0-600-0-0",code:"6",img:"jobs/isco6.png"},{text:"swissdoc.0-700-0-0",code:"7",img:"jobs/isco6.png"},{text:"swissdoc.0-800-0-0",code:"8",img:"jobs/isco6.png"}],a.swissdocGroupLevel2=[],a.swissdocGroupLevel2[1]=[{code:"11",text:"swissdoc.0-110-0-0"},{code:"12",text:"swissdoc.0-120-0-0"},{code:"13",text:"swissdoc.0-130-0-0"},{code:"14",text:"swissdoc.0-140-0-0"},{code:"15",text:"swissdoc.0-150-0-0"},{code:"16",text:"swissdoc.0-160-0-0"},{code:"17",text:"swissdoc.0-170-0-0"}],a.swissdocGroupLevel2[2]=[{code:"21",text:"swissdoc.0-210-0-0"},{code:"22",text:"swissdoc.0-220-0-0"},{code:"23",text:"swissdoc.0-230-0-0"}],a.swissdocGroupLevel2[3]=[{code:"31",text:"swissdoc.0-310-0-0"},{code:"32",text:"swissdoc.0-320-0-0"},{code:"33",text:"swissdoc.0-330-0-0"},{code:"34",text:"swissdoc.0-340-0-0"},{code:"35",text:"swissdoc.0-350-0-0"}],a.swissdocGroupLevel2[4]=[{code:"41",text:"swissdoc.0-410-0-0"},{code:"42",text:"swissdoc.0-420-0-0"},{code:"43",text:"swissdoc.0-430-0-0"},{code:"44",text:"swissdoc.0-440-0-0"},{code:"45",text:"swissdoc.0-450-0-0"}],a.swissdocGroupLevel2[5]=[{code:"51",text:"swissdoc.0-510-0-0"},{code:"52",text:"swissdoc.0-520-0-0"},{code:"53",text:"swissdoc.0-530-0-0"},{code:"54",text:"swissdoc.0-540-0-0"},{code:"55",text:"swissdoc.0-550-0-0"},{code:"56",text:"swissdoc.0-560-0-0"},{code:"57",text:"swissdoc.0-570-0-0"},{code:"58",text:"swissdoc.0-580-0-0"},{code:"59",text:"swissdoc.0-590-0-0"}],a.swissdocGroupLevel2[6]=[{code:"61",text:"swissdoc.0-610-0-0"},{code:"62",text:"swissdoc.0-620-0-0"},{code:"63",text:"swissdoc.0-630-0-0"},{code:"64",text:"swissdoc.0-640-0-0"}],a.swissdocGroupLevel2[7]=[{code:"71",text:"swissdoc.0-710-0-0"},{code:"72",text:"swissdoc.0-720-0-0"},{code:"73",text:"swissdoc.0-730-0-0"}],a.swissdocGroupLevel2[8]=[{code:"81",text:"swissdoc.0-810-0-0"},{code:"82",text:"swissdoc.0-820-0-0"},{code:"83",text:"swissdoc.0-830-0-0"}],a.countJobs=function(){a.idle=!0,"travelTime"===a.searchParams.distanceType?k():l(!1)},a.loadMoreResults=function(){if(a.searchParams.from<a.count){a.idle=!0;var b=a.searchParams.from;b+=a.searchParams.size,b>a.count&&(b=a.count),a.searchParams.from=b,l(!0)}},a.showTimeInH=function(a){var b=Math.floor(a/60),c=a-60*b;return 10>c&&(c="0"+c),b+":"+c},a.setSwissdocGroup=function(b){a.searchParams.educationGroup=b,c.go("education-search")},a.setMyLocation=function(){m(b.myCoords)},a.setCurrentCoords=function(a){m(a)},a.$watchCollection("myCoords",function(){void 0!==b.myCoords&&void 0===a.searchParams.currentCoords&&(a.searchParams.currentCoords=b.myCoords)}),a.$watchCollection("searchParams.distanceType",function(b,c){b!==c&&a.countJobs()}),a.setCurrentZip=function(b){g.getLocationFromZip(b).success(function(b){b.hits.total>0?m(b.hits.hits[0]._source.geoLocation):(a.setCurrentZip(a.searchParams.currentZip),a.locationError("errors.msg.noValidZip"))}).error(function(a){console.log(a)})},a.locationError=function(a){i.show(i.alert().parent(angular.element(document.body)).content(e.instant(a)).ariaLabel("Alert Dialog Demo").ok("OK"))},a.sort=0,a.sortList=[{sort:{field:"title",order:"desc"},text:"global.sort.coursetitle_az"},{sort:{field:"title",order:"asc"},text:"global.sort.coursetitle_za"},{sort:{field:"location.zip",order:"desc"},text:"global.sort.courseLocation_1000"},{sort:{field:"location.zip",order:"asc"},text:"global.sort.courseLocation_9999"}],a.sortResultList=function(){a.searchParams.sort=a.sortList[a.sort].sort,a.countJobs()},a.resetSearchParams=function(){return f.resetSearchParams()},void 0!==a.searchParams.currentCoords?m(a.searchParams.currentCoords):a.setMyLocation()}])}(),function(){"use strict";var a=angular.module("job-desk");a.directive("educationDetail",["$translate","$mdDialog","$timeout",function(a,b,c){return{priority:10,restrict:"A",scope:{educationDetail:"="},templateUrl:"template/education-detail.html",link:function(d,e){d.showDetailContent=!1,d.getMultiLanguageText=function(b){return b[a.use()]},d.showDetail=function(){e.addClass("visited"),d.showDetailContent=!d.showDetailContent},d.checkLanguage=function(a){return"ger"!==a&&"de"!==a&&"eng"!==a&&"en"!==a&&"fre"!==a&&"fr"!==a&&"ita"!==a&&"it"!==a?"other":a},d.showPrintDialog=function(){b.show({parent:angular.element(document.body),templateUrl:"views/template/education-print.html",locals:{educationDetail:d.educationDetail,getMultiLanguageText:d.getMultiLanguageText,checkLanguage:d.checkLanguage},escapeToClose:!1,onComplete:function(){window.print(),c(function(){b.hide()},3e3)},controller:["$scope","educationDetail","getMultiLanguageText","checkLanguage",function(a,c,d,e){a.educationDetail=c,a.getMultiLanguageText=d,a.checkLanguage=e,a.cancel=function(){b.cancel()},a.formatText=function(a){return a=a.replace(/(<|&lt;)br\s*\/*(>|&gt;)/g," ");
}}]})}}}}])}(),angular.module("job-desk").config(["$stateProvider","$mdThemingProvider",function(a,b){b.theme("default").primaryPalette("blue").accentPalette("blue-grey"),a.state("jobs",{parent:"site",url:"/",label:"global.menu.jobs",views:{"content@":{templateUrl:"views/content/jobs/jobs.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),b.addPart("isco"),a.refresh()}]}}).state("job-search",{parent:"site",url:"/job-search",views:{"content@":{templateUrl:"views/content/jobs/search.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),b.addPart("isco"),a.refresh()}]}}).state("job-results",{parent:"site",url:"/job-results",views:{"content@":{templateUrl:"views/content/jobs/result.html",controller:"JobsCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("jobs"),b.addPart("isco"),a.refresh()}]}})}]),function(){"use strict";angular.module("job-desk").factory("JobsService",["$http","baseUrl",function(a,b){function c(){var c={from:e.from,size:e.size,query:{filtered:{query:{match_all:{}},filter:{and:[{range:{publicationDate:{gte:moment().subtract(e.onlineSince,"days").format("YYYY-MM-DD-00.00.00.000000")}}}]}}},sort:[]};""!==e.iscoMajorGroup&&(c.query.filtered.query={term:{"isco.majorGroup":e.iscoMajorGroup}}),""!==e.iscoGroupLevel2&&0!==e.iscoGroupLevel2&&"0"!==e.iscoGroupLevel2&&(c.query.filtered.query={term:{"isco.groupLevel2":e.iscoGroupLevel2}}),"distance"===e.distanceType?c.query.filtered.filter.and.push({nested:{path:"locations.location",filter:{geo_distance:{distance:e.distance+"km","locations.location.coords":e.currentCoords}}}}):c.query.filtered.filter.and.push({nested:{path:"locations.location",filter:{terms:{zip:e.zips}}}}),"2"===e.fulltime&&c.query.filtered.filter.and.push({term:{fulltime:"false"}});var d={};return d[e.sort.field]={order:e.sort.order},c.sort.push(d),a.post(b+"/jobs/_search",c)}function d(){return e={distanceType:"distance",distance:30,travelTime:30,onlineSince:5,fulltime:1,iscoMajorGroup:"",iscoGroupLevel2:"",zips:void 0,currentZip:"",currentCoords:void 0}}var e={from:0,size:20,distanceType:"distance",distance:30,travelTime:30,onlineSince:5,fulltime:1,iscoMajorGroup:"",iscoGroupLevel2:"",zips:void 0,currentZip:"",currentCoords:void 0,sort:{field:"publicationDate",order:"desc"}};return{find:c,params:e,resetSearchParams:d}}])}(),function(){"use strict";angular.module("job-desk").controller("JobsCtrl",["$scope","$rootScope","$state","$filter","$translate","lodash","JobsService","LocationsService","ArrleeService","$mdDialog",function(a,b,c,d,e,f,g,h,i,j){function k(){i.getHeatmap(a.searchParams.currentZip,a.searchParams.travelTime).success(function(b){a.heatmap=b.heatmap,i.getZips(a.searchParams.travelTime).success(function(b){a.searchParams.zips=f.pluck(b.POI,"name"),l(!1)}).error(function(a){console.log(a)})}).error(function(a){console.log(a)})}function l(c){g.find().success(function(d){c&&angular.isArray(b.jobs)?b.jobs=b.jobs.concat(d.hits.hits):b.jobs=d.hits.hits,a.count=d.hits.total,a.idle=!1}).error(function(b){a.idle=!1,console.log(b)})}function m(b){h.getLocation(b).success(function(c){c.hits.total>0?(a.searchParams.currentCoords=b,a.searchParams.currentZip=parseInt(c.hits.hits[0]._source.zip,10),a.currentZip=a.searchParams.currentZip,a.nearestZip=c.hits.hits[0]._source.zip+" ("+c.hits.hits[0]._source.name+")",a.countJobs()):a.locationError("errors.msg.noValidCoords")}).error(function(a){console.log(a)})}b.searchType="jobs",a.searchParams=g.params,a.searchParams.from=0,a.distanceOptions={min:10,max:150,step:10,value:30},a.travelTimeOptions={min:10,max:120,step:5,value:30},a.onlineSinceOptions={min:1,max:60,step:1,value:5},a.iscoMajorGroup=[{text:"isco.1000",code:"1",img:"jobs/isco1.png"},{text:"isco.2000",code:"2",img:"jobs/isco2.png"},{text:"isco.3000",code:"3",img:"jobs/isco3.png"},{text:"isco.4000",code:"4",img:"jobs/isco4.png"},{text:"isco.5000",code:"5",img:"jobs/isco5.png"},{text:"isco.6000",code:"6",img:"jobs/isco6.png"},{text:"isco.7000",code:"7",img:"jobs/isco7.png"},{text:"isco.8000",code:"8",img:"jobs/isco8.png"},{text:"isco.9000",code:"9",img:"jobs/isco9.png"}],a.iscoGroupLevel2=[],a.iscoGroupLevel2[1]=[{code:"11",text:"isco.1100"},{code:"12",text:"isco.1200"},{code:"13",text:"isco.1300"},{code:"14",text:"isco.1400"}],a.iscoGroupLevel2[2]=[{code:"21",text:"isco.2100"},{code:"22",text:"isco.2200"},{code:"23",text:"isco.2300"},{code:"24",text:"isco.2400"},{code:"25",text:"isco.2500"},{code:"26",text:"isco.2600"}],a.iscoGroupLevel2[3]=[{code:"31",text:"isco.3100"},{code:"32",text:"isco.3200"},{code:"33",text:"isco.3300"},{code:"34",text:"isco.3400"},{code:"35",text:"isco.3500"}],a.iscoGroupLevel2[4]=[{code:"41",text:"isco.4100"},{code:"42",text:"isco.4200"},{code:"43",text:"isco.4300"},{code:"44",text:"isco.4400"}],a.iscoGroupLevel2[5]=[{code:"51",text:"isco.5100"},{code:"52",text:"isco.5200"},{code:"53",text:"isco.5300"},{code:"54",text:"isco.5400"}],a.iscoGroupLevel2[6]=[{code:"61",text:"isco.6100"},{code:"62",text:"isco.6200"},{code:"63",text:"isco.6300"}],a.iscoGroupLevel2[7]=[{code:"71",text:"isco.7100"},{code:"72",text:"isco.7200"},{code:"73",text:"isco.7300"},{code:"74",text:"isco.7400"},{code:"75",text:"isco.7500"}],a.iscoGroupLevel2[8]=[{code:"81",text:"isco.8100"},{code:"82",text:"isco.8200"},{code:"83",text:"isco.8300"}],a.iscoGroupLevel2[9]=[{code:"91",text:"isco.9100"},{code:"92",text:"isco.9200"},{code:"93",text:"isco.9300"},{code:"94",text:"isco.9400"},{code:"95",text:"isco.9500"},{code:"96",text:"isco.9600"}],a.count=0,a.nearestZip="",a.currentZip=a.searchParams.currentZip,a.heatmap=void 0,a.idle=!1,a.setIscoGroup=function(b){a.searchParams.iscoMajorGroup=b,a.searchParams.iscoGroupLevel2="",c.go("job-search")},a.countJobs=function(){a.idle=!0,"travelTime"===a.searchParams.distanceType?k():l(!1)},a.loadMoreResults=function(){if(a.searchParams.from<a.count){a.idle=!0;var b=a.searchParams.from;b+=a.searchParams.size,b>a.count&&(b=a.count),a.searchParams.from=b,l(!0)}},a.showTimeInH=function(a){var b=Math.floor(a/60),c=a-60*b;return 10>c&&(c="0"+c),b+":"+c},a.setMyLocation=function(){m(b.myCoords)},a.setCurrentCoords=function(a){m(a)},a.$watchCollection("myCoords",function(){void 0!==b.myCoords&&void 0===a.searchParams.currentCoords&&(a.searchParams.currentCoords=b.myCoords)}),a.$watchCollection("searchParams.distanceType",function(b,c){b!==c&&a.countJobs()}),a.setCurrentZip=function(b){h.getLocationFromZip(b).success(function(b){b.hits.total>0?m(b.hits.hits[0]._source.geoLocation):(a.setCurrentZip(a.searchParams.currentZip),a.locationError("errors.msg.noValidZip"))}).error(function(a){console.log(a)})},a.locationError=function(a){j.show(j.alert().parent(angular.element(document.body)).content(e.instant(a)).ariaLabel(e.instant(a)).ok("OK"))},a.sort=0,a.sortList=[{sort:{field:"publicationDate",order:"desc"},text:"global.sort.newest"},{sort:{field:"quotaTo",order:"desc"},text:"global.sort.workload_0"},{sort:{field:"quotaTo",order:"asc"},text:"global.sort.workload_100"},{sort:{field:"title."+e.use(),order:"desc"},text:"global.sort.jobtitle_az"},{sort:{field:"title."+e.use(),order:"asc"},text:"global.sort.jobtitle_za"}],a.sortResultList=function(){a.searchParams.sort=a.sortList[a.sort].sort,a.countJobs()},void 0!==a.searchParams.currentCoords?m(a.searchParams.currentCoords):a.setMyLocation()}])}(),function(){"use strict";var a=angular.module("job-desk");a.directive("help",function(){return{priority:10,restrict:"E",replace:!0,templateUrl:"template/help.html",link:function(a,b){b.addClass("example")}}}),a.directive("jobDetail",["$translate","$sce","$mdDialog","$timeout",function(a,b,c,d){return{priority:10,restrict:"A",scope:{jobDetail:"="},templateUrl:"template/job-detail.html",link:function(b,e){function f(a,b,c,d,e){a.jobDetail=e,a.language=d,a.getExternalUrl=function(a){return c.trustAsResourceUrl(a)},a.cancel=function(){b.cancel()}}b.showDetailContent=!1,b.getMultiLanguageText=function(b){return b[a.use()]},b.onlineSinceDate=function(a){return moment().diff(a,"days")},b.showDetail=function(a,c){"false"===c.external?b.showInternalJob():b.showExternalJob(a,c)},b.showInternalJob=function(){e.addClass("visited"),b.showDetailContent=!b.showDetailContent},b.showExternalJob=function(b,d){c.show({controller:f,templateUrl:"views/template/external-job-detail.html",parent:angular.element(document.body),targetEvent:b,clickOutsideToClose:!0,locals:{language:a.use(),jobDetail:d}})},f.$inject=["$scope","$mdDialog","$sce","language","jobDetail"],b.showPrintDialog=function(){c.show({parent:angular.element(document.body),templateUrl:"views/template/job-print.html",locals:{jobDetail:b.jobDetail,getMultiLanguageText:b.getMultiLanguageText,onlineSinceDate:b.onlineSinceDate},escapeToClose:!1,onComplete:function(){window.print(),d(function(){c.hide()},3e3)},controller:["$scope","jobDetail","getMultiLanguageText","onlineSinceDate",function(a,b,d,e){a.jobDetail=b,a.getMultiLanguageText=d,a.onlineSinceDate=e,a.cancel=function(){c.cancel()},a.formatText=function(a){return a=a.replace(/(<|&lt;)br\s*\/*(>|&gt;)/g," ")}}]})}}}}]),a.directive("jdExternalDetail",["$window",function(a){return{priority:5,restrict:"C",link:function(b,c){var d=.8*$(a).width(),e=.8*$(a).height();d>768&&1024>=d?d=1024:d>1024&&(d=1200),c.css("height",e),c.css("width",d)}}}])}(),angular.module("job-desk").config(["$stateProvider","$mdThemingProvider",function(a,b){b.theme("default").primaryPalette("blue").accentPalette("blue-grey"),a.state("config",{parent:"site",url:"/config",views:{"content@":{templateUrl:"views/content/config/config.html",controller:"ConfigCtrl"}},resolve:{mainTranslatePartialLoader:["$translate","$translatePartialLoader",function(a,b){return b.addPart("config"),a.refresh()}]}})}]),function(){"use strict";angular.module("job-desk").factory("ConfigService",["$cookies",function(a){function b(){var b=a.getObject("config");return b&&(d=b),d}function c(){var b=new Date;a.remove("config"),a.putObject("config",d,{expires:new Date(b.getFullYear()+10,b.getMonth())})}var d={address:"",zip:void 0,coords:void 0,educations:!0,apprenticeships:!0,localInfo:"",showMunicipalities:!0};return{init:b,config:d,persist:c}}])}(),function(){"use strict";angular.module("job-desk").controller("ConfigCtrl",["$scope","$rootScope","ConfigService","LocationsService","lodash","geolocation",function(a,b,c,d,e,f){function g(){a.idle=!0,a.config.coords||(a.config.coords=b.myCoords),d.getLocation(a.config.coords).success(function(b){a.config.zip=parseInt(b.hits.hits[0]._source.zip,10),a.idle=!1}).error(function(b){console.log(b),a.idle=!1})}a.lookupCoords=!1,a.idle=!1,a.locationError=!1,a.config=c.init(),a.$watchCollection("myCoords",function(){void 0!==b.myCoords&&void 0===a.config.coords&&g()}),a.chooseAddress=function(b){var c={lon:a.lookupCoords[b].geometry.location.K,lat:a.lookupCoords[b].geometry.location.G},d=e.findIndex(a.lookupCoords[0].address_components,{types:["postal_code"]});a.config.coords=c,a.config.zip=parseInt(a.lookupCoords[b].address_components[d].long_name,10),a.lookupCoords=!1},a.resetCoords=function(){a.idle=!0,a.config.coords=void 0,a.config.zip="",f.getLocation().then(function(a){b.myCoords={lat:a.coords.latitude,lon:a.coords.longitude}}),a.$digest(),g()},a.receiveCoords=function(){a.idle=!0,d.getLocationFromZip(a.config.zip).success(function(b){b.hits.total>0?a.config.coords=b.hits.hits[0]._source.geoLocation:a.locationError=!0,a.idle=!1}).error(function(b){console.log(b),a.idle=!1})},a.saveConfig=function(){c.persist(),b.myCoords=a.config.coords,b.appConfig=a.config},a.closeError=function(){a.locationError=!1}}])}(),function(){"use strict";angular.module("job-desk").factory("LocationsService",["$http","baseUrl",function(a,b){function c(c){var d={size:1,query:{filtered:{query:{match_all:{}},filter:{geo_distance:{distance:"10km",geoLocation:c}}}},sort:[{_geo_distance:{geoLocation:c,order:"asc",unit:"km",distance_type:"plane"}}]};return a.post(b+"/locations/_search",d)}function d(c){var d={size:1,query:{term:{zip:c}},sort:[{additionalNumber:{order:"asc"}}]};return a.post(b+"/locations/_search",d)}return{getLocation:c,getLocationFromZip:d}}])}(),function(){"use strict";angular.module("job-desk").factory("MunicipalitiesService",["$http","baseUrl",function(a,b){function c(c,d){var e=Math.ceil(d/3),f={query:{filtered:{query:{term:{initial:"false"}},filter:{and:[{nested:{path:"locations.geoLocation",filter:{geo_distance:{distance:d+"km","locations.geoLocation.coords":c}}}}]}}}};return a.post(b+"/municipalities/_search?size="+e,f)}function d(c){var d={query:{filtered:{query:{term:{initial:"false"}},filter:{and:[{nested:{path:"locations.geoLocation",filter:{terms:{"locations.geoLocation.zip":c}}}},{term:{city:"true"}}]}}}};return a.post(b+"/municipalities/_search",d)}return{getMunicipalities:c,getMunicipalitiesFromZips:d}}])}(),function(){"use strict";angular.module("job-desk").factory("ArrleeService",["$http","arrleeUrl",function(a,b){function c(c,d){e.start_zip=c,e.max_travel_time=d;var f="";for(var g in e)""!==f&&(f+="&"),f+=g+"="+encodeURIComponent(e[g]);return a.get(b+"/heatmap?"+f)}function d(c){return a.get(b+"/poi?poi_types=PLZCH&max_tt="+c)}var e={start_zip:"",start_country:"CH","start-time":7,year:0,month:7,day:25,max_travel_time:30,edgeLength:2.25};return{getHeatmap:c,getZips:d}}])}(),angular.module("job-desk").run(["$templateCache",function(a){"use strict";a.put("template/apprenticeship-detail.html",'<div layout="row" layout-wrap layout-align="space-between start" style="padding: 10px;">\n  <div flex flex-sm="100">\n    <h4 class="strong">{{getMultiLanguageText(apprenticeshipDetail._source.titleM)}}/{{getMultiLanguageText(apprenticeshipDetail._source.titleW)}} <span ng-if="apprenticeshipDetail._source.amount>1" translate="apprenticeships.results.apprenticeshipAmount" translate-values="{value: apprenticeshipDetail._source.amount}"></span></h4>\n\n    <p ng-bind-html="getMultiLanguageText(apprenticeshipDetail._source.description)"></p>\n\n    <div>\n      <strong>{{apprenticeshipDetail._source.company.name}}</strong><br />\n      <strong ng-if="apprenticeshipDetail._source.company.contact.fullName">{{apprenticeshipDetail._source.company.contact.fullName}}<br /></strong>\n      <span>{{apprenticeshipDetail._source.company.address.street}}</span><br />\n      <span>{{apprenticeshipDetail._source.company.address.zip}} {{apprenticeshipDetail._source.company.address.location}}</span><br />\n      <span ng-if="apprenticeshipDetail._source.company.contact.phone">{{apprenticeshipDetail._source.company.contact.phone}}<br /></span>\n      <span ng-if="apprenticeshipDetail._source.company.contact.eMail">{{apprenticeshipDetail._source.company.contact.eMail}}</span>\n    </div>\n\n  </div>\n  <div flex="20" hide-sm>\n    <md-button ng-click="showPrintDialog()"><md-icon>print</md-icon>&nbsp;<span translate="apprenticeships.result.print"></span></md-button>\n  </div>\n</div>\n<md-divider></md-divider>\n'),a.put("template/apprenticeship-print.html",'<md-dialog md-theme="apprenticeships">\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2><span translate="apprenticeships.result.print"></span></h2>\n      <span flex></span>\n    </div>\n  </md-toolbar>\n  <md-dialog-content>\n    <div id="printableArea">\n      <strong>{{::getMultiLanguageText(apprenticeshipDetail._source.titleM)}}/{{::getMultiLanguageText(apprenticeshipDetail._source.titleW)}}\n        <span ng-if="apprenticeshipDetail._source.amount>1" translate="apprenticeships.results.apprenticeshipAmount" translate-values="{value: apprenticeshipDetail._source.amount}"></span>\n      </strong>\n\n      <p ng-bind-html="formatText(getMultiLanguageText(apprenticeshipDetail._source.description))"></p>\n\n      <div>\n        <strong>{{::apprenticeshipDetail._source.company.name}}</strong><br />\n        <strong ng-if="apprenticeshipDetail._source.company.contact.fullName">{{::apprenticeshipDetail._source.company.contact.fullName}}<br /></strong>\n        <span>{{::apprenticeshipDetail._source.company.address.street}}</span><br />\n        <span>{{::apprenticeshipDetail._source.company.address.zip}} {{::apprenticeshipDetail._source.company.address.location}}</span><br />\n        <span ng-if="apprenticeshipDetail._source.company.contact.phone">{{::apprenticeshipDetail._source.company.contact.phone}}<br /></span>\n        <span ng-if="apprenticeshipDetail._source.company.contact.eMail">{{::apprenticeshipDetail._source.company.contact.eMail}}</span>\n      </div>\n    </div>\n\n    <div layout="row" layout-sm="column" layout-align="space-around">\n      <md-progress-circular md-mode="indeterminate" md-diameter="60"></md-progress-circular>\n    </div>\n\n  </md-dialog-content>\n</md-dialog>\n\n'),a.put("template/core/language-switcher.html",'<md-select ng-model="currentLanguage" aria-label="current language">\n  <md-option ng-click="changeLanguage(language)" ng-value="language" ng-repeat="language in allLanguages">{{ language }}</md-option>\n</md-select>\n'),a.put("template/education-detail.html",'<div layout="row" layout-wrap layout-align="space-between start" style="padding: 10px;">\n  <div flex flex-sm="100" ng-click="showDetail()">\n    <h4 class="strong">{{educationDetail._source.title}}</h4>\n    <strong><span translate="educations.result.location"></span> {{educationDetail._source.location.zip}} {{educationDetail._source.location.name}}</strong>\n    <div ng-if="!showDetailContent">\n      <p ng-text-truncate="educationDetail._source.content" ng-tt-words-threshold="20" ng-tt-no-toggling></p>\n    </div>\n\n    <div ng-if="showDetailContent" layout="row" layout-wrap layout-align="space-between start">\n\n      <p flex="100" ng-bind-html="educationDetail._source.content"></p>\n\n      <div flex="25" flex-sm="100">\n        <strong>{{educationDetail._source.provider.name}}</strong><br />\n        <strong ng-if="educationDetail._source.provider.contact.firstName">{{educationDetail._source.provider.contact.firstName}} {{educationDetail._source.provider.contact.lastName}}<br /></strong>\n        <span>{{educationDetail._source.provider.address.street}}</span><br />\n        <span>{{educationDetail._source.location.zip}} {{educationDetail._source.location.name}}</span><br />\n        <span ng-if="educationDetail._source.provider.phone"><span translate="educations.result.phone" translate-values="{value: educationDetail._source.provider.phone}"></span><br /></span>\n        <span ng-if="educationDetail._source.provider.fax"><span translate="educations.result.fax" translate-values="{value: educationDetail._source.provider.fax}"></span><br /></span>\n        <span ng-if="educationDetail._source.provider.eMail">{{educationDetail._source.provider.eMail}}<br /></span>\n        <span ng-if="educationDetail._source.provider.url">{{educationDetail._source.provider.url}}</span>\n      </div>\n\n      <div flex="25" flex-sm="100">\n          <div ng-if="educationDetail._source.startText"><strong translate="educations.result.start"></strong> <span ng-bind-html="educationDetail._source.startText"></span></div>\n          <div ng-if="educationDetail._source.duration"><strong translate="educations.result.duration"></strong> <span ng-bind-html="educationDetail._source.duration"></span></div>\n          <div ng-if="educationDetail._source.activity"><strong translate="educations.result.activity"></strong> <span ng-bind-html="educationDetail._source.activity"></span></div>\n          <div ng-if="educationDetail._source.cost"><strong translate="educations.result.cost"></strong> <span ng-bind-html="educationDetail._source.cost"></span></div>\n        <div ng-if="educationDetail._source.languages"><strong translate="educations.result.language"></strong> <span translate="educations.result.languages.{{checkLanguage(educationDetail._source.languages)}}"></span></div>\n      </div>\n\n      <div flex="25" flex-sm="100">\n        <div ng-if="educations.result.target">\n          <strong translate="educations.result.target"></strong>\n          <p ng-bind-html="educationDetail._source.target"></p>\n        </div>\n        <div ng-if="educations.result.preconditions">\n          <strong translate="educations.result.preconditions"></strong>\n          <p ng-bind-html="educationDetail._source.preconditions"></p>\n        </div>\n        <div>\n          <strong translate="educations.result.degree"></strong>\n        </div>\n      </div>\n\n      <div flex="25" flex-sm="100">\n        <div ng-if="educationDetail._source.comments.class || educationDetail._source.comments.offers">\n          <strong translate="educations.result.comments"></strong>\n          <p ng-bind-html="educationDetail._source.comments.class"></p>\n          <p ng-bind-html="educationDetail._source.comments.offers"></p>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div flex="20" hide-sm>\n    <md-button ng-click="showDetail()">\n      <span ng-if="!showDetailContent">\n        <md-icon>search</md-icon>&nbsp;<span translate="educations.result.showMore"></span>\n      </span>\n      <span ng-if="showDetailContent">\n        <md-icon>close</md-icon>&nbsp;<span translate="educations.result.showLess"></span>\n      </span>\n    </md-button>\n    <p></p>\n    <md-button ng-click="showPrintDialog()"><md-icon>print</md-icon>&nbsp;<span translate="educations.result.print"></span></md-button>\n  </div>\n</div>\n<md-divider></md-divider>\n'),a.put("template/education-print.html",'<md-dialog md-theme="educations">\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2><span translate="educations.result.print"></span></h2>\n      <span flex></span>\n    </div>\n  </md-toolbar>\n  <md-dialog-content>\n\n    <div id="printableArea">\n\n      <strong>{{::educationDetail._source.title}}</strong><br />\n      <strong><span translate="educations.result.location"></span></strong> : {{::educationDetail._source.location.zip}} {{::educationDetail._source.location.name}}\n\n      <p ng-bind-html="formatText(educationDetail._source.content)"></p>\n\n      <strong>{{::educationDetail._source.provider.name}}</strong><br />\n      <strong ng-if="educationDetail._source.provider.contact.firstName">{{::educationDetail._source.provider.contact.firstName}} {{::educationDetail._source.provider.contact.lastName}}<br /></strong>\n      <span>{{::educationDetail._source.provider.address.street}}</span><br />\n      <span>{{::educationDetail._source.location.zip}} {{::educationDetail._source.location.name}}</span><br />\n      <span ng-if="educationDetail._source.provider.phone"><span translate="educations.result.phone" translate-values="{value: educationDetail._source.provider.phone}"></span><br /></span>\n      <span ng-if="educationDetail._source.provider.fax"><span translate="educations.result.fax" translate-values="{value: educationDetail._source.provider.fax}"></span><br /></span>\n      <span ng-if="educationDetail._source.provider.eMail">{{::educationDetail._source.provider.eMail}}<br /></span>\n      <span ng-if="educationDetail._source.provider.url">{{::educationDetail._source.provider.url}}</span>\n\n      <div ng-if="educationDetail._source.startText"><strong translate="educations.result.start"></strong> : <span ng-bind-html="educationDetail._source.startText"></span></div>\n      <div ng-if="educationDetail._source.duration"><strong translate="educations.result.duration"></strong> : <span ng-bind-html="educationDetail._source.duration"></span></div>\n      <div ng-if="educationDetail._source.activity"><strong translate="educations.result.activity"></strong> : <span ng-bind-html="educationDetail._source.activity"></span></div>\n      <div ng-if="educationDetail._source.cost"><strong translate="educations.result.cost"></strong> : <span ng-bind-html="educationDetail._source.cost"></span></div>\n      <div ng-if="educationDetail._source.languages"><strong translate="educations.result.language"></strong> : <span translate="educations.result.languages.{{checkLanguage(educationDetail._source.languages)}}"></span></div>\n\n      <div ng-if="educations.result.target">\n        <strong translate="educations.result.target"></strong>\n        <p ng-bind-html="educationDetail._source.target"></p>\n      </div>\n      <div ng-if="educations.result.preconditions">\n        <strong translate="educations.result.preconditions"></strong>\n        <p ng-bind-html="educationDetail._source.preconditions"></p>\n      </div>\n      <div>\n        <strong translate="educations.result.degree"></strong>\n      </div>\n\n      <div ng-if="educationDetail._source.comments.class || educationDetail._source.comments.offers">\n        <strong translate="educations.result.comments"></strong>\n        <p ng-bind-html="educationDetail._source.comments.class"></p>\n        <p ng-bind-html="educationDetail._source.comments.offers"></p>\n      </div>\n\n    </div>\n\n    <div layout="row" layout-sm="column" layout-align="space-around">\n      <md-progress-circular md-mode="indeterminate" md-diameter="60"></md-progress-circular>\n    </div>\n\n  </md-dialog-content>\n</md-dialog>\n\n'),a.put("template/external-job-detail.html",'<md-dialog aria-label="{{jobDetail.title[language]}}">\n  <form>\n    <md-toolbar>\n      <div class="md-toolbar-tools">\n        <h2>{{jobDetail.title[language]}}</h2>\n        <span flex></span>\n        <md-button class="md-icon-button" ng-click="cancel()">\n          <md-icon aria-label="Close dialog">close</md-icon>\n        </md-button>\n      </div>\n    </md-toolbar>\n    <iframe ng-src="{{getExternalUrl(jobDetail.url)}}" class="jd-iframe jd-external-detail"></iframe>\n    <div class="md-actions" layout="row">\n      <md-button ng-click="cancel()" >\n        <span translate="jobs.result.showLess"></span>\n      </md-button>\n    </div>\n  </form>\n</md-dialog>\n'),a.put("template/help.html",'<div id="help">\n    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="39px" height="39px" viewbox="0 0 39 39" enable-background="new 0 0 39 39" xml:space="preserve">\n        <g>\n            <path style="fill: rgb(68, 141, 214);" class="uv-bubble-background" fill="rgba(46, 49, 51, 0.6)" d="M31.425,34.514c-0.432-0.944-0.579-2.007-0.591-2.999c4.264-3.133,7.008-7.969,7.008-13.409\n                C37.842,8.658,29.594,1,19.421,1S1,8.658,1,18.105c0,9.446,7.932,16.79,18.105,16.79c1.845,0,3.94,0.057,5.62-0.412\n                c0.979,1.023,2.243,2.3,2.915,2.791c3.785,2.759,7.571,0,7.571,0S32.687,37.274,31.425,34.514z"></path>\n            <g>\n                <g>\n                    <path style="fill: white;" class="uv-bubble-foreground" fill="#FFFFFF" d="M16.943,19.467c0-3.557,4.432-3.978,4.432-6.058c0-0.935-0.723-1.721-2.383-1.721\n                        c-1.508,0-2.773,0.725-3.709,1.87l-2.441-2.743c1.598-1.9,4.01-2.924,6.602-2.924c3.891,0,6.271,1.959,6.271,4.765\n                        c0,4.4-5.037,4.732-5.037,7.265c0,0.481,0.243,0.994,0.574,1.266l-3.316,0.965C17.303,21.459,16.943,20.522,16.943,19.467z\n                         M16.943,26.19c0-1.326,1.114-2.441,2.44-2.441c1.327,0,2.442,1.115,2.442,2.441c0,1.327-1.115,2.441-2.442,2.441\n                        C18.058,28.632,16.943,27.518,16.943,26.19z"></path>\n                </g>\n            </g>\n        </g>\n    </svg>\n</div>'),a.put("template/job-detail.html",'<div layout="row" layout-wrap layout-align="space-between start" style="padding: 10px;">\n  <div flex flex-sm="100" ng-click="showDetail($event,jobDetail._source)">\n      <h4 class="strong">{{::getMultiLanguageText(jobDetail._source.title)}}</h4>\n\n      <strong ng-if="onlineSinceDate(jobDetail._source.publicationDate)>1" translate="jobs.result.onlineSince" translate-values="{value: onlineSinceDate(jobDetail._source.publicationDate)}"></strong>\n      <strong ng-if="onlineSinceDate(jobDetail._source.publicationDate)===1" translate="jobs.result.onlineSinceOneDay"></strong>\n      /\n      <strong translate="jobs.result.workload"></strong>\n      <strong ng-if="jobDetail._source.quotaFrom!==jobDetail._source.quotaTo">{{::jobDetail._source.quotaFrom}} - {{::jobDetail._source.quotaTo}}%</strong>\n      <strong ng-if="jobDetail._source.quotaFrom===jobDetail._source.quotaTo">{{::jobDetail._source.quotaTo}}%</strong>\n\n      <p ng-if="!showDetailContent" ng-text-truncate="getMultiLanguageText(jobDetail._source.description)" ng-tt-words-threshold="20" ng-tt-no-toggling></p>\n\n      <div ng-if="showDetailContent">\n        <!-- todo change to stellennummeravam check -->\n        <span ng-if="jobDetail._source.external===\'false\'">\n          <p ng-bind-html="getMultiLanguageText(jobDetail._source.description)"></p>\n          <div layout="row" layout-wrap layout-align="space-between start">\n            <div flex="25" flex-sm="100">\n              <strong class="fake-label" translate="jobs.result.jobLocation"></strong><br />\n              <span>{{::getMultiLanguageText(jobDetail._source.locations.remarks)}}</span><br />\n\n              <strong class="fake-label" translate="jobs.result.entryDate"></strong><br />\n              <span ng-if="jobDetail._source.availableNow" translate="jobs.result.availableNow"></span>\n              <span ng-if="!jobDetail._source.availableNow && jobDetail._source.startDate" translate="jobs.result.availableFromDate" translate-values="{value: jobDetail._source.startDate}"></span>\n              <span ng-if="!jobDetail._source.availableNow && !jobDetail._source.startDate" translate="jobs.result.availableByAppointment"></span>\n              <br />\n\n              <strong class="fake-label" translate="jobs.result.contractDuration"></strong><br />\n              <span ng-if="!jobDetail._source.permanentJob && jobDetail._source.endDate" translate="untilDate" translate-values="{value: jobDetail._source.endDate}"></span>\n              <span ng-if="!jobDetail._source.permanentJob && !jobDetail._source.endDate" translate="jobs.result.nonPermanent"></span>\n              <span ng-if="jobDetail._source.permanentJob" translate="jobs.result.permanent"></span>\n            </div>\n\n            <!-- Sprachen -->\n            <div flex="25" flex-sm="100">\n              <div ng-repeat="language in jobDetail._source.languages" ng-if="language.languageCode">\n                <strong class="fake-label" translate="language.jobs.{{::language.languageCode}}"></strong><br />\n                (<span translate="jobs.result.spoken"></span>: <span translate="global.codes.languages.skills.{{::language.spokenCode}}"></span> / <span translate="jobs.result.written"></span>: <span translate="global.codes.languages.skills.{{::language.writtenCode}}"></span>)\n              </div>\n            </div>\n\n            <!-- Bewerbung -->\n            <div flex="25" flex-sm="100">\n              <div ng-if="jobDetail._source.application.written">\n                <strong class="fake-label" translate="jobs.result.titleWrittenApplication"></strong><br />\n                <span translate="jobs.result.letterApplication"></span>\n              </div>\n              <div ng-if="jobDetail._source.application.electronical">\n                <strong class="fake-label" translate="jobs.result.titleElectronicApplication"></strong><br />\n                <span>{{jobDetail._source.contact.eMail}} <span ng-if="jobDetail._source.company.url">/ {{::jobDetail._source.company.url}}</span></span>\n              </div>\n              <div ng-if="jobDetail._source.application.phone">\n                <strong class="fake-label" translate="jobs.result.titlePhoneApplication"></strong><br />\n                <span>{{jobDetail._source.contact.phone}}</span>\n              </div>\n            </div>\n            <div flex="25" flex-sm="100">\n              <strong>{{::jobDetail._source.company.name}}</strong><br />\n              <span>{{::jobDetail._source.company.address.street}}</span><br />\n              <span>{{::jobDetail._source.company.address.zip}} {{::jobDetail._source.company.address.location}}</span><br />\n              <span ng-if="jobDetail._source.company.poAddress.poBox"><br /><span translate="jobs.result.poBox" translate-values="{value: jobDetail._source.company.poAddress.poBox}"></span><br /></span>\n              <span ng-if="jobDetail._source.company.poAddress.poBox">{{::jobDetail._source.company.poAddress.zip}} {{::jobDetail._source.company.poAddress.location}}</span>\n\n              <br />\n              <strong><span translate="global.codes.salutations.{{::jobDetail._source.contact.gender}}"></span> {{::jobDetail._source.contact.firstName}} {{::jobDetail._source.contact.lastName}}</strong><br />\n              <span ng-if="jobDetail._source.contact.phone">{{::jobDetail._source.contact.phone}}<br /></span>\n              <span ng-if="jobDetail._source.contact.eMail">{{::jobDetail._source.contact.eMail}}</span>\n            </div>\n          </div>\n        </span>\n      </div>\n\n    </div>\n  <div flex="20" hide-sm>\n    <md-button ng-click="showDetail($event,jobDetail._source)" aria-label="Show / Close Detail">\n      <span ng-if="!showDetailContent">\n        <md-icon>search</md-icon>&nbsp;<span translate="jobs.result.showMore"></span>\n      </span>\n      <span ng-if="showDetailContent">\n        <md-icon>close</md-icon>&nbsp;<span translate="jobs.result.showLess"></span>\n      </span>\n    </md-button>\n    <p></p>\n    <md-button ng-click="showPrintDialog()" ng-if="jobDetail._source.external===\'false\'"><md-icon>print</md-icon>&nbsp;<span translate="jobs.result.print"></span></md-button>\n  </div>\n</div>\n\n<md-divider></md-divider>\n'),
a.put("template/job-print.html",'<md-dialog>\n  <md-toolbar>\n    <div class="md-toolbar-tools">\n      <h2><span translate="jobs.result.print"></span></h2>\n      <span flex></span>\n    </div>\n  </md-toolbar>\n  <md-dialog-content>\n    <div id="printableArea">\n      <!-- todo add external job -->\n      <strong>{{::getMultiLanguageText(jobDetail._source.title)}}</strong><br />\n      <span ng-if="onlineSinceDate(jobDetail._source.publicationDate)>1" translate="jobs.result.onlineSince" translate-values="{value: onlineSinceDate(jobDetail._source.publicationDate)}"></span>\n      <span ng-if="onlineSinceDate(jobDetail._source.publicationDate)===1" translate="jobs.result.onlineSinceOneDay"></span>\n      /\n      <span translate="jobs.result.workload"></span>\n      <span ng-if="jobDetail._source.quotaFrom!==jobDetail._source.quotaTo">{{::jobDetail._source.quotaFrom}} - {{::jobDetail._source.quotaTo}}%</span>\n      <span ng-if="jobDetail._source.quotaFrom===jobDetail._source.quotaTo">{{::jobDetail._source.quotaTo}}%</span>\n\n      <p ng-bind-html="formatText(getMultiLanguageText(jobDetail._source.description))"></p>\n      <strong class="fake-label" translate="jobs.result.jobLocation"></strong> :\n      <span>{{::getMultiLanguageText(jobDetail._source.locations.remarks)}}</span><br />\n\n      <strong class="fake-label" translate="jobs.result.entryDate"></strong> :\n      <span ng-if="jobDetail._source.availableNow" translate="jobs.result.availableNow"></span>\n      <span ng-if="!jobDetail._source.availableNow && jobDetail._source.startDate" translate="jobs.result.availableFromDate" translate-values="{value: jobDetail._source.startDate}"></span>\n      <span ng-if="!jobDetail._source.availableNow && !jobDetail._source.startDate" translate="jobs.result.availableByAppointment"></span>\n      <br />\n\n      <strong class="fake-label" translate="jobs.result.contractDuration"></strong> :\n      <span ng-if="!jobDetail._source.permanentJob && jobDetail._source.endDate" translate="untilDate" translate-values="{value: jobDetail._source.endDate}"></span>\n      <span ng-if="!jobDetail._source.permanentJob && !jobDetail._source.endDate" translate="jobs.result.nonPermanent"></span>\n      <span ng-if="jobDetail._source.permanentJob" translate="jobs.result.permanent"></span>\n\n    <!-- Sprachen -->\n      <div ng-repeat="language in jobDetail._source.languages" ng-if="language.languageCode">\n        <strong class="fake-label" translate="language.jobs.{{language.languageCode}}"></strong> :\n        (<span translate="jobs.result.spoken"></span>: <span translate="global.codes.languages.skills.{{language.spokenCode}}"></span> / <span translate="jobs.result.written"></span>: <span translate="global.codes.languages.skills.{{language.writtenCode}}"></span>)\n      </div>\n\n    <!-- Bewerbung -->\n      <div ng-if="jobDetail._source.application.written">\n        <strong class="fake-label" translate="jobs.result.titleWrittenApplication"></strong> :\n        <span translate="jobs.result.letterApplication"></span>\n      </div>\n      <div ng-if="jobDetail._source.application.electronical">\n        <strong class="fake-label" translate="jobs.result.titleElectronicApplication"></strong> :\n        <span>{{::jobDetail._source.contact.eMail}} <span ng-if="jobDetail._source.company.url">/ {{::jobDetail._source.company.url}}</span></span>\n      </div>\n      <div ng-if="jobDetail._source.application.phone">\n        <strong class="fake-label" translate="jobs.result.titlePhoneApplication"></strong> :\n        <span>{{::jobDetail._source.contact.phone}}</span>\n      </div>\n\n      <strong>{{::jobDetail._source.company.name}}</strong><br />\n      <span>{{::jobDetail._source.company.address.street}}</span><br />\n      <span>{{::jobDetail._source.company.address.zip}} {{::jobDetail._source.company.address.location}}</span><br />\n      <span ng-if="jobDetail._source.company.poAddress.poBox"><br /><span translate="jobs.result.poBox" translate-values="{value: jobDetail._source.company.poAddress.poBox}"></span><br /></span>\n      <span ng-if="jobDetail._source.company.poAddress.poBox">{{::jobDetail._source.company.poAddress.zip}} {{::jobDetail._source.company.poAddress.location}}</span>\n\n      <strong><span translate="global.codes.salutations.{{jobDetail._source.contact.gender}}"></span> {{::jobDetail._source.contact.firstName}} {{::jobDetail._source.contact.lastName}}</strong><br />\n      <span ng-if="jobDetail._source.contact.phone">{{::jobDetail._source.contact.phone}}<br /></span>\n      <span ng-if="jobDetail._source.contact.eMail">{{::jobDetail._source.contact.eMail}}</span>\n    </div>\n    <div layout="row" layout-sm="column" layout-align="space-around">\n      <md-progress-circular md-mode="indeterminate" md-diameter="60"></md-progress-circular>\n    </div>\n  </md-dialog-content>\n</md-dialog>\n'),a.put("template/numeric.html",'<div>\n	<div class="button-wrapper">\n		<button ng-key="1">1</button>\n		<button ng-key="2">2</button>\n		<button data-ng-key="3">3</button>\n		<button data-ng-key="4">4</button>\n		<button data-ng-key="5">5</button>\n		<button data-ng-key="6">6</button>\n		<button data-ng-key="7">7</button>\n		<button data-ng-key="8">8</button>\n		<button data-ng-key="9">9</button>\n\n		<button data-ng-key="0" class="button-wide">0</button>\n        <button ng-click="setCoords()" class="smaller primary">Ok</button>\n\n        <button ng-click="closeNumpad()" class="smaller">Close</button>\n        <button ng-click="clearNumpad()" class="smaller">Clear</button>\n	</div>\n</div>\n'),a.put("template/results.html",'<div class="row">\n    <a href="#/detail/{{job.id}}" class="job-result col-md-10">\n            <strong class="fake-label">{{job.BEZEICHNUNG}} / #{{job.id}} / Online seit {{job.ONLINE_SEIT}} Tag(en) / {{job.PENSUM_BIS}}%</strong>\n            <p ng-text-truncate="job.BESCHREIBUNG" ng-tt-chars-threshold="200" ng-tt-no-toggling></p>\n    </a>\n    <div class="cold-md-2" align="center">\n        <button glyph-icon="print" admin-symbol class="result-button btn-plain"></button>\n        <button ng-click="star(job.id)" glyph-icon="star" admin-symbol class="result-button btn-plain" ng-class="{favorite: isStarred(job.id)}"></button>\n    </div>\n</div>')}]);